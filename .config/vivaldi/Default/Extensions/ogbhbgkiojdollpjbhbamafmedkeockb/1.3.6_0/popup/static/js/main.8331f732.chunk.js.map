{"version":3,"sources":["../common/EY.ts","../common/messaging/message-sender.ts","../common/interfaces/login.ts","../common/utils/formatters.ts","services/popup-mixpanel.service.ts","components/PopupScreen.tsx","components/screens/Login/LoginScreen.tsx","components/screens/Home/CashbackList/CashbackList.tsx","components/screens/Home/RetailerActivated/RetailerActivatedComponent.tsx","components/screens/Home/HomeScreen.tsx","../common/react/SwitchComponent/SwitchComponent.tsx","../common/services/browser.service.ts","components/screens/Share/ShareScreen.tsx","components/screens/Profile/Linkbox/Linkbox.tsx","components/screens/Profile/ProfileCards/ProfileCard.tsx","components/screens/Profile/ProfileCards/Cards/EarnyPlusCard.tsx","../common/react/EarnyPlusTest/EarnyPlusText.tsx","../common/react/FadeAnimation/FadeAnimation.jsx","components/screens/Profile/ProfileCards/Cards/FreeSubscriptionCard.tsx","components/screens/Profile/Earnings/EarningsSummary.tsx","components/screens/Profile/Links/SettingScreenLinks.tsx","components/screens/Profile/Cashout/CashoutComponent.tsx","components/screens/Profile/ProfileScreen.tsx","components/screens/Main/BottomNavigation/BottomNavigation.tsx","components/screens/ProductDetails/modal/WatchListConfirmationModal.tsx","components/screens/ProductDetails/price-history-chart/PriceHistoryChart.tsx","../common/react/GradientStaticSlider/GradientStaticSlider.tsx","../common/product-state-parser/product-state-parser.ts","components/screens/ProductDetails/ProductDetailsScreen.tsx","components/screens/Watchlist/WatchlistItemComponent/WatchlistItemComponent.tsx","components/screens/Watchlist/WatchlistScreen.tsx","components/screens/Profile/FriendReferralEarnings/FriendReferralEarnings.tsx","components/screens/Main/Main.tsx","EarnyPopup.tsx","index.tsx"],"names":["EY","Hosts","MIXPANEL_API_HOST","Tokens","MXPL","DEV_MODE_KEY","StorageKeys","STORAGE_KEY_HAS_INSERTED_DEVICE","STORAGE_KEY_MODALS_SHOWN","STORAGE_KEY_MODALS_DISMISSED","STORAGE_KEY_IS_LOGGED_IN","STORAGE_KEY_CASHBACK_LIST","STORAGE_KEY_DEV_MODE_PASS","STORAGE_KEY_STARTUP_MODAL_SHOWN","STORAGE_KEY_ACTIVATED_RETAILERS","CacheKeys","CACHE_KEY_DEFAULT_CASHBACK_LIST","CACHE_KEY_SUBSCRIBED_CASHBACK_LIST","CACHE_KEY_PRICE_PROTECTED_PRODUCT_PATH","CACHE_KEY_ACCOUNT_BALANCE","CACHE_KEY_FRIENDS","CACHE_KEY_COMMUNICATION_DATA","CACHE_KEY_REFERRAL_LINK","CACHE_KEY_MERCHANTS","CACHE_KEY_WILDLINK_MERCHANTS","CACHE_KEY_USER_DATA","Cashback","EARNY_CHROME_USER_ID","Cookie","EARNY_USER_COOKIE_NAME","EARNY_CHROME_COOKIE_NAME","EARNY_SUB_UPDATE_COOKIE_NAME","EARNY_USER_COOKIE_DOMAIN","Urls","EARNY_DOMAIN_URL","EARNY_SIGNIN_URL","EARNY_SIGNUP_URL","EARNY_WELCOME_URL","EARNY_UNINSTALL_URL","EARNY_PLAN_URL","EARNY_ACCOUNT_PLAN_URL","EARNY_APP_IOS_STORE_URL","EARNY_APP_ANDROID_STORE_URL","EARNY_SUPPORT_URL","EARNY_SETTINGS_PAGE_URL","Utms","UTM_INSTALL_SIGNUP","UTM_ACTIVATE_CB_SIGNUP","UTM_CHECKOUT_APPLY_SIGNUP","UTM_POPUP_SIGNUP","UTM_WIDGET_SIGNUP","AppEvents","APP_EVENT_CASHBACK_ACTIVATED","ModalNames","MODAL_NAME_LOGIN_SUCCESSFUL","MODAL_NAME_ACTIVATE_CASHBACK","MODAL_NAME_CASHBACK_ACTIVATED","MODAL_NAME_CHECKOUT","MODAL_NAME_COUPON","ModalActionTypes","TYPE_SHOW_WIDGET","TYPE_CLOSE_WIDGET","TYPE_MINIMIZE_WIDGET","TYPE_SHOW_MODAL","TYPE_CLOSE_MODAL","ChromeViewTypes","CHROME_VIEW_TYPE_BACKGROUND","CHROME_VIEW_TYPE_POPUP","CHROME_VIEW_TYPE_MODAL","MixpanelEvents","EVENT_SCREEN_PRESENTED","EVENT_MODAL_DISMISSED","EVENT_LOGIN_BUTTON_PRESSED","EVENT_SIGNUP_BUTTON_PRESSED","EVENT_CHROME_EXTENSION_POPUP_OPENED","EVENT_LINK_SHARING_SETTINGS_TURNED_ON","EVENT_LINK_SHARING_SETTINGS_TURNED_OFF","EVENT_ACTIVATE_CASHBACK_BUTTON_PRESSED","EVENT_ACTIVATE_CASHBACK_UPSELL_BUTTON_PRESSED","EVENT_HELP_BUTTON_PRESSED","EVENT_SETTINGS_BUTTON_PRESSED","EVENT_EARNY_PLUS_BUTTON_PRESSED","EVENT_IOS_APP_STORE_BUTTON_PRESSED","EVENT_ANDROID_APP_STORE_BUTTON_PRESSED","EVENT_ADD_TO_WATCHLIST_ITEM_CTA_BUTTON_PRESSED","EVENT_ADD_TO_WATCHLIST_ITEM_REMOVE_BUTTON_PRESSED","EVENT_PRODUCT_DETAILS_ADD_TO_WATCHLIST_CTA_BUTTON_PRESSED","EVENT_PRODUCT_DETAILS_REMOVE_ITEM_FROM_WATCHLIST_CTA_PRESSED","EVENT_PRESSED_VIEW_PRICE_HISTORY","EVENT_EARNY_WIDGET_PRESENTED","EVENT_EARNY_WIDGET_DISMISSED","EVENT_EARNY_WIDGET_OPENED","EVENT_WATCHLIST_PRESENTED","EVENT_WATCHLIST_EDIT_ITEMS_BUTTON_PRESSED","EVENT_WATCHLIST_ITEMS_REMOVE_BUTTON_PRESSED","EVENT_WATCHLIST_ITEM_SELECTED","EVENT_CASHBACK_BALANCE_CASH_OUT_PRESSED","EVENT_CHECKOUT_MODAL_APPLY_BUTTON_PRESSED","EVENT_COUPON_TESTING_SCREEN_FINISHED_LOADING","EVENT_COUPON_TESTING_SCREEN_DISMISSED","EVENT_COUPON_RESULT_SCREEN_DISMISSED","EVENT_COUPON_RESULT_SCREEN_CONTINUE_TO_CHECKOUT_BUTTON_PRESSED","EVENT_FREE_SUBSCRIPTION_ACTION_PRESSED","EVENT_FRIEND_REFERRALS_SHARE_VIA_PRESSED","MixpanelUserProperties","FIRST_EXTENSION_SIGNIN_DATE","LAST_EXTENSION_SIGNIN_DATE","FIRST_EXTENSION_OPEN_DATE","IS_CHROME_EXTENSION_USER","CHROME_EXTENSION_VERSION","IS_CHROME_EXTENSION_LOGGED_IN","CASHBACK_MODAL_DISPLAY_MODE","RuntimeEvents","RUNTIME_EVENT_IS_USER_LOGGED_IN","RUNTIME_EVENT_IS_USER_SUBSCRIBED","RUNTIME_EVENT_GET_USER","RUNTIME_EVENT_GET_ACTIVE_RETAILER","RUNTIME_EVENT_GET_ACTIVE_PRODUCT","RUNTIME_EVENT_GET_CASHBACK_LIST","RUNTIME_EVENT_HEALTH_CHECK","RUNTIME_EVENT_GO_TO_LOGIN","RUNTIME_EVENT_ACTIVATE_RETAILER_CASHBACK","RUNTIME_EVENT_ACTIVATE_DOUBLE_RETAILER_CASHBACK","RUNTIME_EVENT_TRACK_MIXPANEL","RUNTIME_EVENT_LINK_SHARING_STATUS_UPDATED","RUNTIME_EVENT_GET_WATCHLIST","RUNTIME_EVENT_GET_WATCHLIST_ITEM","RUNTIME_EVENT_ADD_ITEM_TO_WATCHLIST","RUNTIME_EVENT_ADD_ITEM_TO_WATCHLIST_PENDING_PRODUCT_DETAILS","RUNTIME_EVENT_REMOVE_ITEM_FROM_WATCHLIST","RUNTIME_EVENT_REMOVE_BATCH_FROM_WATCHLIST","RUNTIME_EVENT_GET_PROFILE","RUNTIME_EVENT_REQUEST_BACKGROUND_SYNC","RUNTIME_EVENT_START_COUPON_CHECK","RUNTIME_EVENT_ACTIVATE_FREE_EARNY_PLUS","RUNTIME_EVENT_NAVIGATE_TO_RETAILER_FROM_CASHBACK_LIST","RUNTIME_EVENT_DID_DISMISS_MODAL","RequestSource","retry","require","MessageSender","message","withRetries","Promise","resolve","reject","chrome","runtime","sendMessage","response","lastError","Error","retries","name","this","success","mixpanelEventName","data","isLoggedIn","isSubscribed","user","retailer","product","isSignup","source","showConfirmation","cashbackList","watchlist","itemId","isFromProductDetails","itemIds","linkSharingStatus","profile","retailerId","retailerUrl","modalName","Formatters","cashbackRate","cashbackUrlTemplate","isCashbackActivated","retailerName","toString","PopupMixpanelService","eventName","payload","viewType","screen","requestTrackMixpanelEvent","console","error","trackScreenPresented","requestTrack","screenName","formatRetailerForMixpanel","via","shareMethod","PopupScreen","props","setScreen","React","Component","LoginScreen","componentDidMount","a","handleLoginClick","trackLoginButtonPressed","goToLogin","POPUP","handleSignupClick","trackSignupButtonPressed","className","style","width","height","src","alt","bottom","padding","id","onClick","renderSignedOutDefault","AUTHORIZED_PROVIDERS","CashbackListRetailerComponent","openLink","trendingBrand","navigateToRetailerFromCashbackList","window","close","imageUrl","cashbackTitle","CashbackListComponent","state","getUser","setState","retailers","trendingBrands","provider","deal","_","deals","push","parseInt","defaultUrl","split","images","textLogo","title","slice","trendingBrandsComponents","filterTrendingRetailers","map","ProductCategoryRate","rateValue","rate","kind","amount","RetailerLogo","includes","RetailerActivatedComponent","rates","forEach","splittedRateName","sanitazedName","replace","trim","rateList","toLowerCase","retailerImageUrl","activatedText","exclusionText","HomeScreen","activateActiveRetailer","activeRetailer","trackActivateCashbackPressed","activateCashbackForActiveRetailer","isActiveRetailerActivated","canActivateActiveRetailer","log","activateDoubleCashback","trackActivateCashbackUpsellPressed","activateDoubleCashbackForActiveRetailer","loaded","all","getActiveRetailer","getCashbackList","buttonText","activateCashbackSubscribedCTA","renderActivated","renderCanActivate","renderNoCashbackRetailerList","renderNoCashbackAvailable","SwitchComponent","handleChange","newVal","isOn","mounted","handleToggle","defaultValue","prevProps","color","onColor","offColor","checked","onChange","type","background","htmlFor","BrowserService","getManifest","version","key","value","storage","local","set","batch","remove","get","undefined","cookie","JSON","parse","decodeURIComponent","body","encodeURIComponent","stringify","url","cookies","domain","expirationDate","encodeCookieBody","tabs","query","active","currentWindow","currentTab","getCurrentActiveTab","tab","tabId","newUrl","update","onUpdated","addListener","listener","info","status","removeListener","inNewTab","wait","create","createdTab","updatedTab","sharingStatus","isEnabled","text","browserAction","setBadgeText","options","notifications","colorHex","setBadgeBackgroundColor","setIcon","path","getStorageData","shown","setStorageData","userId","getExtensionVersion","setUninstallURL","clear","badgeColors","blue","green","browserService","ShareDetail","number","ShareScreen","handleSharingChange","updateLinkSharing","isSharingEnabled","getSharingStatus","animation","loop","autoplay","animationData","wildlinkAnimation","rendererSettings","preserveAspectRatio","EarnyLinkBox","copyEarnyLink","copied","input","document","createElement","setAttribute","appendChild","select","execCommand","removeChild","copyTextToClipBoard","referralLinkUrl","setTimeout","handleFacebookClick","encodeURI","facebookSharingURL","trackFriendReferralsShareViaPressed","navigateToExternalUrl","handleTwitterClick","twitterSharingURL","handleMailClick","mailSharingUrl","linkboxAnimation","personalLink","personalLinkTruncated","length","substr","target","href","disabled","xmlns","viewBox","fill","fill-rule","d","SubscriptionCard","lottieAnimationData","bannerImg","isClickToPauseDisabled","children","onCTAClicked","ctaText","EarnyPlusCard","handleCTAClick","earnyPlusAnimation","EarnyPlusText","fontSize","fontWeight","textBefore","textAfter","Paragraph","styled","p","Span","span","FadeAnimation","useState","show","render","setRender","useEffect","fadeInKeyFrame","keyframes","fadeOutKeyFrame","fadeIn","css","fadeOut","Container","div","propz","fade","onAnimationEnd","onAnimationEnded","FreeSubscriptionCard","handleCTAClicked","trackFreeSubscriptionActionPressed","requestActivateFreeEarnyPlus","enabled","minHeight","freeSubscriptionAnimation","EarningsSummary","accountBalance","lifetimeBalance","currentBalance","pendingBalance","SettingsScreenLink","SettingScreenLinks","handleHelpClick","trackHelpButtonPressed","handleSettingsClick","trackSettingsButtonPressed","handleEarnyPlusClick","trackEarnyPlusButtonPressed","CashoutComponent","cashOut","cashoutEmail","cashout","email","recipient","subject","trackCashbackBalanceCashOutPressed","cashoutTitle","cashoutDescription","description","canCashout","rel","ProfileScreen","handleAppStoreClick","trackiOSAppStoreButtonPressed","handleAndroidStoreClick","trackAndroidAppStoreButtonPressed","renderSettingsScreen","firstName","lastName","friends","referral_link","showActivateEarnyPlus","showActivateFreeMonth","showFreeMonthActivatedConfirmation","getProfile","userHadASubscription","userData","status_map","subscription","has_subscribed","linked","newState","allowed","size","loading","BottomNavigation","menuItems","routes","route","to","activeClassName","iconPathUrl","WatchListConfirmationModal","stroke","stroke-linecap","stroke-width","transform","cx","cy","r","PriceHistoryChart","emptyData","price","date","Date","formatDate","format","formatPrice","formatTooltip","formatTooltipLabel","label","isEmpty","chartData","showDots","margin","top","right","left","x1","y1","x2","y2","offset","stopColor","axisLine","tick","tickLine","dataKey","interval","tickMargin","tickFormatter","fontFamily","labelFormatter","formatter","strokeWidth","fillOpacity","dot","ProductState","colorFrom","colorTo","GradientStaticSlider","percentZeroToOne","percentage","thumbRed","thumbGreen","thumbBlue","Input","min","max","step","ProductStateParser","isPendingProductDetails","PRODUCT_DETAILS_PENDING","isProductPage","productDetails","PRODUCT_DETAILS_VALID","NO_PRODUCT_DETAILS","NO_PRODUCT_PAGE","ProductDetailsScreen","modal","createRef","onClickPrevious","history","goBack","onSave","isProductSavedToWatchlist","trackProductDetailsAddToWatchlistCTAPressed","addItemToWatchlist","current","removeItemFromWatchlist","addProductToWatchlistForPending","addItemToWatchlistPendingProductDetails","showProductDetailsPending","renderNoProductDetails","renderProductDetailsPending","pdpAnimation","renderIsNotProductPage","isProductFromWatchlist","match","params","getWatchlistItem","getActiveProduct","isInWatchlist","priceDetails","productName","substring","lowestPriceTitle","lowestPrice","highestPriceTitle","highestPrice","lowestPriceValue","highestPriceValue","timeToBuy","ref","getState","renderPriceProtected","classNames","WatchlistItemComponent","onClickSelect","isDeleteMode","onItemClicked","watchlistItem","willBeSelected","selected","onSelected","onUnselected","PriceDropValue","priceChange","selectedClass","deleteButtonClassNames","x","y","rx","newPrice","previousPrice","priceDropValue","WatchlistStep","WatchlistScreen","onClickedItem","clickedItem","onSelectedItem","selectedItem","items","selectedItems","trackWatchlistItemSelected","onUnselectedItem","unselectedItem","item","startDeletion","trackWatchlistEditItemsButtonPressed","cancelDeletion","removeItems","removeItemBatchFromWatchlist","trackWatchlistItemsRemoveButtonPressed","renderList","watchlistItems","filter","removeButtonClasses","renderListEmpty","watchlistAnimation","getWatchlist","trackWatchlistPresented","FriendReferralEarnings","Main","component","EarnyPopup","requestBackgroundSync","trackChromeExtensionPopupOpened","isUserLoggedIn","requestMinimizeEarnyWidget","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.8331f732.chunk.js","sourcesContent":["// ===========================================================================================\n// --- Earny Constants\n// ===========================================================================================\nexport default class EY {\n    // ===========================================================================================\n    // --- Hosts\n    // ===========================================================================================\n    static Hosts = {\n        MIXPANEL_API_HOST: 'https://api.mixpanel.com',\n    }\n    // ===========================================================================================\n    // --- Tokens\n    // ===========================================================================================\n    static Tokens = {\n        MXPL: '02811a3dd90b6d30eb2598db734bd7d3',\n        DEV_MODE_KEY: '93933afa48100489073e9c5f7bff6a961fc14cbd'\n    }\n    // ===========================================================================================\n    // --- Storage Keys\n    // ===========================================================================================\n    static StorageKeys = {\n        STORAGE_KEY_HAS_INSERTED_DEVICE: 'hasInsertedDevice',\n        STORAGE_KEY_MODALS_SHOWN: 'modalsShown',\n        STORAGE_KEY_MODALS_DISMISSED: 'modalsDismissed',\n        STORAGE_KEY_IS_LOGGED_IN: 'isLoggedIn',\n        STORAGE_KEY_CASHBACK_LIST: 'cashback-list',\n        STORAGE_KEY_DEV_MODE_PASS: 'dev-mode-pass',\n        STORAGE_KEY_STARTUP_MODAL_SHOWN: 'startup-modal-shown',\n        STORAGE_KEY_ACTIVATED_RETAILERS: 'activated-retailers',\n    }\n    // ===========================================================================================\n    // --- Cache Keys\n    // ===========================================================================================\n    static CacheKeys = {\n        CACHE_KEY_DEFAULT_CASHBACK_LIST: 'default-cashback-list',\n        CACHE_KEY_SUBSCRIBED_CASHBACK_LIST: 'subscribed-cashback-list',\n        CACHE_KEY_PRICE_PROTECTED_PRODUCT_PATH: 'pp-product-path',\n        CACHE_KEY_ACCOUNT_BALANCE: 'account-balance',\n        CACHE_KEY_FRIENDS: 'friends',\n        CACHE_KEY_COMMUNICATION_DATA: 'communication-data',\n        CACHE_KEY_REFERRAL_LINK: 'referral-link',\n        CACHE_KEY_MERCHANTS: 'merchants',\n        CACHE_KEY_WILDLINK_MERCHANTS: 'wildlink-merchants',\n        CACHE_KEY_USER_DATA: 'user-data',\n    }\n\n    // ===========================================================================================\n    // --- Cashback\n    // ===========================================================================================\n    static Cashback = {\n        EARNY_CHROME_USER_ID: 'earny-chrome'\n    }\n\n    // ===========================================================================================\n    // --- Cookie\n    // ===========================================================================================\n    static Cookie = {\n        EARNY_USER_COOKIE_NAME: 'ey_user',\n        EARNY_CHROME_COOKIE_NAME: 'ey_chrome',\n        EARNY_SUB_UPDATE_COOKIE_NAME: 'ey_sub_update',\n        EARNY_USER_COOKIE_DOMAIN: '.earny.co',\n    }\n    // ===========================================================================================\n    // --- Urls\n    // ===========================================================================================\n    static Urls = {\n        EARNY_DOMAIN_URL: 'https://www.earny.co',\n        EARNY_SIGNIN_URL: 'https://www.earny.co/signup/login',\n        EARNY_SIGNUP_URL: 'https://www.earny.co/signup',\n        EARNY_WELCOME_URL: 'https://www.earny.co/welcome',\n        EARNY_UNINSTALL_URL: 'https://www.earny.co/chrome/uninstall',\n        EARNY_PLAN_URL: 'https://www.earny.co/plan',\n        EARNY_ACCOUNT_PLAN_URL: 'https://www.earny.co/account/plan',\n        EARNY_APP_IOS_STORE_URL: 'https://earny.app.link/peOLHt3XOO',\n        EARNY_APP_ANDROID_STORE_URL: 'https://earny.app.link/0rB2YK7XOO',\n        EARNY_SUPPORT_URL: 'https://support.earny.co/',\n        EARNY_SETTINGS_PAGE_URL: 'https://www.earny.co/settings',\n    }\n    // ===========================================================================================\n    // --- Utms\n    // ===========================================================================================\n    static Utms = {\n        UTM_INSTALL_SIGNUP: 'utm_source=chrome&utm_medium=installation&utm_campaign=unattributed',\n        UTM_ACTIVATE_CB_SIGNUP: 'utm_source=chrome&utm_medium=popup&utm_campaign=activate-cashback',\n        UTM_CHECKOUT_APPLY_SIGNUP: 'utm_source=chrome&utm_medium=popup&utm_campaign=activate-coupon',\n        UTM_POPUP_SIGNUP: 'utm_source=chrome&utm_medium=toolbar&utm_campaign=login-button',\n        UTM_WIDGET_SIGNUP: 'utm_source=chrome&utm_medium=widget&utm_campaign=login-button',\n    }\n    // ===========================================================================================\n    // --- App Events\n    // ===========================================================================================\n    static AppEvents = {\n        APP_EVENT_CASHBACK_ACTIVATED: 'chrome-cashback-activated',\n    }\n    // ===========================================================================================\n    // --- Modal Names\n    // ===========================================================================================\n    static ModalNames = {\n        MODAL_NAME_LOGIN_SUCCESSFUL: 'modal-login-successful',\n        MODAL_NAME_ACTIVATE_CASHBACK: 'modal-activate-cashback',\n        MODAL_NAME_CASHBACK_ACTIVATED: 'modal-cashback-activated',\n        MODAL_NAME_CHECKOUT: 'modal-checkout',\n        MODAL_NAME_COUPON: 'modal-coupon',\n    }\n    // ===========================================================================================\n    // --- Modal Action Types\n    // ===========================================================================================\n    static ModalActionTypes = {\n        TYPE_SHOW_WIDGET: 'showWidget',\n        TYPE_CLOSE_WIDGET: 'closeWidget',\n        TYPE_MINIMIZE_WIDGET: 'minimizeEarnyWidget',\n        TYPE_SHOW_MODAL: 'showModal',\n        TYPE_CLOSE_MODAL: 'closeModal',\n    }\n    // ===========================================================================================\n    // --- Chrome View Types\n    // ===========================================================================================\n    static ChromeViewTypes = {\n        CHROME_VIEW_TYPE_BACKGROUND: 'view-type-background',\n        CHROME_VIEW_TYPE_POPUP: 'view-type-popup',\n        CHROME_VIEW_TYPE_MODAL: 'view-type-modal',\n    }\n    // ===========================================================================================\n    // --- Mixpanel Events\n    // ===========================================================================================\n    static MixpanelEvents = {\n        EVENT_SCREEN_PRESENTED: 'screen-presented',\n        EVENT_MODAL_DISMISSED: 'modal-dismissed',\n        EVENT_LOGIN_BUTTON_PRESSED: 'login-button-pressed',\n        EVENT_SIGNUP_BUTTON_PRESSED: 'signup-button-pressed',\n        EVENT_CHROME_EXTENSION_POPUP_OPENED: 'chrome-extension-popup-opened',\n        EVENT_LINK_SHARING_SETTINGS_TURNED_ON: 'link-sharing-settings-turned-on',\n        EVENT_LINK_SHARING_SETTINGS_TURNED_OFF: 'link-sharing-settings-turned-off',\n        EVENT_ACTIVATE_CASHBACK_BUTTON_PRESSED: 'activate-cashback-button-pressed',\n        EVENT_ACTIVATE_CASHBACK_UPSELL_BUTTON_PRESSED: 'activate-cashback-upsell-button-pressed',\n        EVENT_HELP_BUTTON_PRESSED: 'help-button-pressed',\n        EVENT_SETTINGS_BUTTON_PRESSED: 'settings-button-pressed',\n        EVENT_EARNY_PLUS_BUTTON_PRESSED: 'earny-plus-button-pressed',\n        EVENT_IOS_APP_STORE_BUTTON_PRESSED: 'ios-app-store-button-pressed',\n        EVENT_ANDROID_APP_STORE_BUTTON_PRESSED: 'android-app-store-button-pressed',\n        EVENT_ADD_TO_WATCHLIST_ITEM_CTA_BUTTON_PRESSED: 'add-to-watchlist-item-cta-button-pressed',\n        EVENT_ADD_TO_WATCHLIST_ITEM_REMOVE_BUTTON_PRESSED: 'add-to-watchlist-item-remove-button-pressed',\n        EVENT_PRODUCT_DETAILS_ADD_TO_WATCHLIST_CTA_BUTTON_PRESSED: 'product-details-add-to-watchlist-cta-pressed',\n        EVENT_PRODUCT_DETAILS_REMOVE_ITEM_FROM_WATCHLIST_CTA_PRESSED: 'product-details-remove-item-from-watchlist-cta-pressed',\n        EVENT_PRESSED_VIEW_PRICE_HISTORY: 'pressed-view-price-history',\n        EVENT_EARNY_WIDGET_PRESENTED: 'earny-widget-presented',\n        EVENT_EARNY_WIDGET_DISMISSED: 'earny-widget-dismissed',\n        EVENT_EARNY_WIDGET_OPENED: 'earny-widget-opened',\n        EVENT_WATCHLIST_PRESENTED: 'watchlist-presented',\n        EVENT_WATCHLIST_EDIT_ITEMS_BUTTON_PRESSED: 'watchlist-edit-items-button-pressed',\n        EVENT_WATCHLIST_ITEMS_REMOVE_BUTTON_PRESSED: 'watchlist-items-remove-button-pressed',\n        EVENT_WATCHLIST_ITEM_SELECTED: 'watchlist-item-selected',\n        EVENT_CASHBACK_BALANCE_CASH_OUT_PRESSED: 'cashback-balance-cash-out-pressed',\n        EVENT_CHECKOUT_MODAL_APPLY_BUTTON_PRESSED: 'checkout-modal-apply-button-pressed',\n        EVENT_COUPON_TESTING_SCREEN_FINISHED_LOADING: 'coupon-testing-screen-finished-loading',\n        EVENT_COUPON_TESTING_SCREEN_DISMISSED: 'coupon-testing-screen-dismissed',\n        EVENT_COUPON_RESULT_SCREEN_DISMISSED: 'coupon-result-screen-dismissed',\n        EVENT_COUPON_RESULT_SCREEN_CONTINUE_TO_CHECKOUT_BUTTON_PRESSED: 'coupon-result-screen-continue-to-checkout-button-pressed',\n        EVENT_FREE_SUBSCRIPTION_ACTION_PRESSED: 'free-subscription-action-pressed',\n        EVENT_FRIEND_REFERRALS_SHARE_VIA_PRESSED: 'friend-referrals-share-via-pressed',\n    }\n    // ===========================================================================================\n    // --- Mixpanel User Properties\n    // ===========================================================================================\n    static MixpanelUserProperties = {\n        FIRST_EXTENSION_SIGNIN_DATE: 'First Extension Signin Date',\n        LAST_EXTENSION_SIGNIN_DATE: 'Last Extension Signin Date',\n        FIRST_EXTENSION_OPEN_DATE: 'First Extension Open Date',\n        IS_CHROME_EXTENSION_USER: 'isChromeExtensionUser',\n        CHROME_EXTENSION_VERSION: 'chromeExtensionVersion',\n        IS_CHROME_EXTENSION_LOGGED_IN: 'isChromeExtensionLoggedIn',\n        CASHBACK_MODAL_DISPLAY_MODE: 'Cashback Modal Display Mode',\n    }\n    // ===========================================================================================\n    // --- Runtime Events\n    // ===========================================================================================\n    static RuntimeEvents = {\n        RUNTIME_EVENT_IS_USER_LOGGED_IN: 'is-user-logged-in',\n        RUNTIME_EVENT_IS_USER_SUBSCRIBED: 'is-user-subscribed',\n        RUNTIME_EVENT_GET_USER: 'get-user',\n        RUNTIME_EVENT_GET_ACTIVE_RETAILER: 'get-active-retailer',\n        RUNTIME_EVENT_GET_ACTIVE_PRODUCT: 'get-active-product',\n        RUNTIME_EVENT_GET_CASHBACK_LIST: 'get-cashback-list',\n        RUNTIME_EVENT_HEALTH_CHECK: 'health-check',\n        RUNTIME_EVENT_GO_TO_LOGIN: 'go-to-login',\n        RUNTIME_EVENT_ACTIVATE_RETAILER_CASHBACK: 'activate-retailer-cashback',\n        RUNTIME_EVENT_ACTIVATE_DOUBLE_RETAILER_CASHBACK: 'activate-retailer-double-cashback',\n        RUNTIME_EVENT_TRACK_MIXPANEL: 'track-mixpanel',\n        RUNTIME_EVENT_LINK_SHARING_STATUS_UPDATED: 'link-sharing-status-updated',\n        RUNTIME_EVENT_GET_WATCHLIST: 'get-watchlist',\n        RUNTIME_EVENT_GET_WATCHLIST_ITEM: 'get-watchlist-item',\n        RUNTIME_EVENT_ADD_ITEM_TO_WATCHLIST: 'add-item-to-watchlist',\n        RUNTIME_EVENT_ADD_ITEM_TO_WATCHLIST_PENDING_PRODUCT_DETAILS: 'add-item-to-watchlist-pending-product-details',\n        RUNTIME_EVENT_REMOVE_ITEM_FROM_WATCHLIST: 'remove-item-from-watchlist',\n        RUNTIME_EVENT_REMOVE_BATCH_FROM_WATCHLIST: 'remove-batch-from-watchlist',\n        RUNTIME_EVENT_GET_PROFILE: 'get-profile',\n        RUNTIME_EVENT_REQUEST_BACKGROUND_SYNC: 'request-background-sync',\n        RUNTIME_EVENT_START_COUPON_CHECK: 'start-coupon-check',\n        RUNTIME_EVENT_ACTIVATE_FREE_EARNY_PLUS: 'activate-free-earny-plus',\n        RUNTIME_EVENT_NAVIGATE_TO_RETAILER_FROM_CASHBACK_LIST: 'navigate-to-retailer-from-cashback-list',\n        RUNTIME_EVENT_DID_DISMISS_MODAL: 'did-dismiss-modal',\n    }\n}","import { Profile } from \"../interfaces/profile\";\nimport { RequestSource } from \"../interfaces/login\";\nimport EY from \"../EY\";\n\nimport {\n    WatchlistItem,\n    Product,\n    CashbackList,\n    MessageDispatcherSimpleResponse,\n    MessageDispatcherGetWatchlistResponse,\n    MessageDispatcherGetWatchlistItemResponse,\n    MessageDispatcherGetProfileResponse,\n    User,\n    Retailer\n} from \"../interfaces\";\n\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\nconst retry = require('async-retry');\n\n// ===========================================================================================\n// --- MessageSender\n// ===========================================================================================\nexport class MessageSender {\n    // ===========================================================================================\n    // --- Private API\n    // ===========================================================================================\n    private static async sendMessage(message: any, withRetries: number = 5): Promise<any> {\n        return retry(() => {\n            return new Promise((resolve, reject) => {\n                chrome.runtime.sendMessage(message, (response) => {\n                    if (chrome.runtime.lastError) {\n                        return reject(new Error(chrome.runtime.lastError.message));\n                    }\n                    resolve(response);\n                });\n            });\n        }, { retries: withRetries });\n    }\n\n    // ===========================================================================================\n    // --- Public API\n    // ===========================================================================================\n    public static async backgroundHealthCheck() {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_HEALTH_CHECK\n        };\n        const response = await this.sendMessage(message, 0);\n        return (response && response.success === true);\n    }\n\n    public static async requestTrackMixpanelEvent(mixpanelEventName: string, data?: any): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_TRACK_MIXPANEL,\n            mixpanelEventName,\n            data\n        };\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async isUserLoggedIn(): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_IS_USER_LOGGED_IN,\n        };\n        const response: { isLoggedIn: boolean } = await this.sendMessage(message);\n        return (response.isLoggedIn);\n    }\n\n    public static async isUserSubscribed(): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_IS_USER_SUBSCRIBED,\n        };\n        const response: { isSubscribed: boolean } = await this.sendMessage(message);\n        return (response.isSubscribed);\n    }\n\n    public static async getUser(): Promise<User | null> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_GET_USER,\n        };\n        const response: { user: User | null } = await this.sendMessage(message);\n        return (response.user);\n    }\n\n\n    public static async getActiveRetailer(): Promise<Retailer | null> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_GET_ACTIVE_RETAILER,\n        };\n        const response: { retailer: Retailer | null } = await this.sendMessage(message);\n        return (response.retailer);\n    }\n\n    public static async getActiveProduct(): Promise<Product | null> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_GET_ACTIVE_PRODUCT,\n        };\n        const response: { product: Product | null } = await this.sendMessage(message);\n        return (response.product);\n    }\n\n    public static async goToLogin(isSignup: boolean, source: RequestSource): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_GO_TO_LOGIN,\n            isSignup,\n            source\n        };\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async activateCashbackForActiveRetailer(source: RequestSource, showConfirmation: boolean): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_ACTIVATE_RETAILER_CASHBACK,\n            source,\n            showConfirmation\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async activateDoubleCashbackForActiveRetailer(source: RequestSource, showConfirmation: boolean): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_ACTIVATE_DOUBLE_RETAILER_CASHBACK,\n            source,\n            showConfirmation\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async activateCouponCheck(): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_START_COUPON_CHECK,\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async getCashbackList(): Promise<CashbackList | null> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_GET_CASHBACK_LIST\n        }\n        const response: any = await this.sendMessage(message);\n        return response.cashbackList;\n    }\n\n    public static async getWatchlist(): Promise<WatchlistItem[]> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_GET_WATCHLIST\n        }\n        const response: MessageDispatcherGetWatchlistResponse = await this.sendMessage(message);\n        return response.watchlist;\n    }\n\n    public static async getWatchlistItem(itemId: string): Promise<Product | null> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_GET_WATCHLIST_ITEM,\n            itemId\n        }\n        const response: MessageDispatcherGetWatchlistItemResponse = await this.sendMessage(message);\n        return response.product;\n    }\n\n    public static async addItemToWatchlist(isFromProductDetails: boolean): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_ADD_ITEM_TO_WATCHLIST,\n            isFromProductDetails\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async addItemToWatchlistPendingProductDetails(): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_ADD_ITEM_TO_WATCHLIST_PENDING_PRODUCT_DETAILS,\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async removeItemFromWatchlist(isFromProductDetails: boolean): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_REMOVE_ITEM_FROM_WATCHLIST,\n            isFromProductDetails\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async removeItemBatchFromWatchlist(itemIds: string[]): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_REMOVE_BATCH_FROM_WATCHLIST,\n            itemIds\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async updateLinkSharing(linkSharingStatus: boolean): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_LINK_SHARING_STATUS_UPDATED,\n            linkSharingStatus\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async getProfile(): Promise<Profile | null> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_GET_PROFILE\n        }\n        const response: MessageDispatcherGetProfileResponse = await this.sendMessage(message);\n        return (response.profile);\n    }\n\n    public static async requestBackgroundSync(): Promise<void> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_REQUEST_BACKGROUND_SYNC\n        }\n        await this.sendMessage(message);\n    }\n\n    public static async requestActivateFreeEarnyPlus(): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_ACTIVATE_FREE_EARNY_PLUS,\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async navigateToRetailerFromCashbackList(retailerId: number, retailerUrl: string): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_NAVIGATE_TO_RETAILER_FROM_CASHBACK_LIST,\n            retailerId,\n            retailerUrl\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n\n    public static async didDismissModal(modalName: string, retailerId: number): Promise<boolean> {\n        const message = {\n            name: EY.RuntimeEvents.RUNTIME_EVENT_DID_DISMISS_MODAL,\n            modalName,\n            retailerId,\n        }\n        const response: MessageDispatcherSimpleResponse = await this.sendMessage(message);\n        return (response && response.success === true);\n    }\n}","export enum RequestSource {\n    ACTIVATE_CASHBACK_MODAL,\n    CHECKOUT_MODAL,\n    POPUP,\n    WIDGET,\n    OTHER\n}","import { Retailer } from \"../interfaces\";\n\nexport interface MixpanelFormattedRetailer {\n    cashbackRate: string;\n    cashbackUrlTemplate: string;\n    isCashbackActivated: boolean;\n    retailerName: string;\n    retailerId: string;\n}\n\nexport class Formatters {\n    public static formatRetailerForMixpanel(retailer: Retailer): MixpanelFormattedRetailer {\n        return {\n            cashbackRate: retailer.cashbackRate,\n            cashbackUrlTemplate: retailer.cashbackUrlTemplate,\n            isCashbackActivated: retailer.isCashbackActivated || false,\n            retailerName: retailer.name,\n            retailerId: retailer.retailerId.toString()\n        }\n    }\n}\n","import EY from \"../../common/EY\";\nimport { Retailer } from \"../../common/interfaces\";\nimport { MessageSender } from \"../../common/messaging/message-sender\";\nimport { Formatters } from \"../../common/utils/formatters\";\n\nexport type Screen = 'login' | 'home' | 'product-details' | 'profile' | 'watchlist' | 'share';\n\nexport class PopupMixpanelService {\n\n    private static screen: Screen;\n\n    /***\n     * Nothing is being tracked directly from the popup, the background script handles it\n     * so we send it a message to request a track\n     */\n    private static async requestTrack(eventName: string, data?: any) {\n        try {\n            const payload = {\n                viewType: EY.ChromeViewTypes.CHROME_VIEW_TYPE_POPUP,\n                screen: PopupMixpanelService.screen,\n                ...data\n            };\n\n            await MessageSender.requestTrackMixpanelEvent(eventName, payload);\n        } catch (error) {\n            console.error(`Error tracking mixpanel event ${eventName}`, error.message);\n        }\n    }\n\n    public static setScreen(screen: Screen) {\n        PopupMixpanelService.screen = screen;\n        this.trackScreenPresented(screen);\n    }\n\n    public static trackChromeExtensionPopupOpened() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_CHROME_EXTENSION_POPUP_OPENED);\n    }\n\n    public static trackScreenPresented(screen: Screen) {\n        this.requestTrack(EY.MixpanelEvents.EVENT_SCREEN_PRESENTED, { screenName: screen });\n    }\n\n    public static trackLoginButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_LOGIN_BUTTON_PRESSED);\n    }\n\n    public static trackSignupButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_SIGNUP_BUTTON_PRESSED);\n    }\n\n    public static trackLinkSharingTurnedOn() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_LINK_SHARING_SETTINGS_TURNED_ON);\n    }\n\n    public static trackLinkSharingTurnedOff() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_LINK_SHARING_SETTINGS_TURNED_OFF);\n    }\n\n    public static trackActivateCashbackPressed(retailer: Retailer) {\n        const payload = Formatters.formatRetailerForMixpanel(retailer);\n        this.requestTrack(EY.MixpanelEvents.EVENT_ACTIVATE_CASHBACK_BUTTON_PRESSED, payload);\n    }\n\n    public static trackActivateCashbackUpsellPressed(retailer?: Retailer) {\n        const payload = retailer ? Formatters.formatRetailerForMixpanel(retailer) : null;\n        this.requestTrack(EY.MixpanelEvents.EVENT_ACTIVATE_CASHBACK_UPSELL_BUTTON_PRESSED, payload);\n    }\n\n    public static trackHelpButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_HELP_BUTTON_PRESSED);\n    }\n\n    public static trackSettingsButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_SETTINGS_BUTTON_PRESSED);\n    }\n\n    public static trackEarnyPlusButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_EARNY_PLUS_BUTTON_PRESSED);\n    }\n\n    public static trackiOSAppStoreButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_IOS_APP_STORE_BUTTON_PRESSED);\n    }\n\n    public static trackAndroidAppStoreButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_ANDROID_APP_STORE_BUTTON_PRESSED);\n    }\n\n    public static trackProductDetailsAddToWatchlistCTAPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_PRODUCT_DETAILS_ADD_TO_WATCHLIST_CTA_BUTTON_PRESSED);\n    }\n\n    public static productDetailsRemoveItemFromWatchlistCTAPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_PRODUCT_DETAILS_REMOVE_ITEM_FROM_WATCHLIST_CTA_PRESSED);\n    }\n\n    public static pressedViewPriceHistory() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_PRESSED_VIEW_PRICE_HISTORY);\n    }\n\n    public static trackWatchlistPresented() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_WATCHLIST_PRESENTED);\n    }\n\n    public static trackWatchlistEditItemsButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_WATCHLIST_EDIT_ITEMS_BUTTON_PRESSED);\n    }\n\n    public static trackWatchlistItemsRemoveButtonPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_WATCHLIST_ITEMS_REMOVE_BUTTON_PRESSED);\n    }\n\n    public static trackWatchlistItemSelected() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_WATCHLIST_ITEM_SELECTED);\n    }\n\n    public static trackCashbackBalanceCashOutPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_CASHBACK_BALANCE_CASH_OUT_PRESSED);\n    }\n\n    public static trackFreeSubscriptionActionPressed() {\n        this.requestTrack(EY.MixpanelEvents.EVENT_FREE_SUBSCRIPTION_ACTION_PRESSED);\n    }\n\n    public static trackFriendReferralsShareViaPressed(via: 'Facebook' | 'Email' | 'Twitter') {\n        this.requestTrack(EY.MixpanelEvents.EVENT_FRIEND_REFERRALS_SHARE_VIA_PRESSED, { shareMethod: via });\n    }\n}","import React from \"react\";\nimport { PopupMixpanelService, Screen } from \"../services/popup-mixpanel.service\";\n\n\nexport abstract class PopupScreen<P, S> extends React.Component<P, S> {\n\n    private screen: Screen;\n\n    constructor(props: P, screen: Screen) {\n        super(props);\n        this.screen = screen;\n    }\n\n    componentDidMount() {\n        PopupMixpanelService.setScreen(this.screen);\n    }\n}","import React from \"react\";\n\nimport { PopupMixpanelService } from '../../../services/popup-mixpanel.service';\nimport { MessageSender } from \"../../../../common/messaging/message-sender\";\nimport { RequestSource } from \"../../../../common/interfaces/login\";\nimport { PopupScreen } from \"../../PopupScreen\";\n\nimport './LoginScreen.scss';\n\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\ninterface LoginScreenProps { }\ninterface LoginScreenState { }\n\n// ===========================================================================================\n// --- LoginScreeen\n// ===========================================================================================\nexport class LoginScreen extends PopupScreen<LoginScreenProps, LoginScreenState> {\n\n    constructor(props: LoginScreenProps) {\n        super(props, 'login');\n    }\n\n    componentDidMount = async () => {\n        super.componentDidMount();\n    }\n\n    handleLoginClick = async () => {\n        PopupMixpanelService.trackLoginButtonPressed();\n        MessageSender.goToLogin(false, RequestSource.POPUP);\n    }\n\n    handleSignupClick = async () => {\n        PopupMixpanelService.trackSignupButtonPressed();\n        MessageSender.goToLogin(true, RequestSource.POPUP);\n    }\n\n    renderSignedOutDefault(): any {\n        const canvas = {\n            width: '450px',\n            height: '580px',\n        };\n\n        const buttonBar = {\n            bottom: '39px',\n            padding: '0px 50px'\n        }\n\n        return (\n            <div className=\"canvas\" style={canvas}>\n                <div className=\"splash\">\n                    <img src=\"images/login/chrome-ext-splash.gif\" alt=\"banner-retailers\"></img>\n                </div>\n                <div className=\"login-retailer-logo earny\">\n                    <img src=\"images/earny-logo.svg\" alt=\"earny-logo\" />\n                </div>\n                <div>\n                    <p className=\"signup-text\">Sign up to start earning cashback when you shop on the web or on our app</p>\n                </div>\n                <div className=\"button-bar-two\" style={buttonBar}>\n                    <button id=\"signin-button\" className=\"left\" onClick={this.handleLoginClick}>\n                        Log In\n                    </button>\n                    <button id=\"signup-button\" className=\"right\" onClick={this.handleSignupClick}>\n                        Sign Up\n                    </button>\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        return this.renderSignedOutDefault();\n    }\n}","import React from \"react\";\nimport * as _ from 'lodash';\nimport { CashbackListRetailer, CashbackList, User } from \"../../../../../common/interfaces\";\nimport { MessageSender } from '../../../../../common/messaging/message-sender';\n\nimport './CashbackList.scss';\n\nconst AUTHORIZED_PROVIDERS = ['wildlink'] // Authorized providers ORDERED\nconst MAX_CASHBACK_RETAILERS_TO_DISPLAY = 8;\n\ninterface TrendingBrand {\n    retailerId: number;\n    retailerUrl: string;\n    imageUrl: string;\n    cashbackTitle: string;\n}\n\ninterface CashbackListProps {\n    cashbackList: CashbackList;\n}\n\ninterface CashbackListState {\n    user?: User;\n}\n\ninterface CashbackListRetailerProps {\n    trendingBrand: TrendingBrand;\n}\n\nclass CashbackListRetailerComponent extends React.Component<CashbackListRetailerProps, any> {\n\n    openLink = () => {\n        const retailerId = this.props.trendingBrand.retailerId;\n        const retailerUrl = this.props.trendingBrand.retailerUrl;\n        MessageSender.navigateToRetailerFromCashbackList(retailerId, retailerUrl);\n        window.close();\n    }\n\n    render() {\n        return (\n            <div className=\"cashback-list-retailer-item\">\n                <button onClick={this.openLink}>\n                    <img src={this.props.trendingBrand.imageUrl} alt=\"\" />\n                </button>\n                <p>{this.props.trendingBrand.cashbackTitle}</p>\n            </div>\n        );\n    }\n}\n\nexport class CashbackListComponent extends React.Component<CashbackListProps, CashbackListState> {\n\n    constructor(props: CashbackListProps) {\n        super(props);\n        this.state = {}\n    }\n\n    async componentDidMount() {\n        const user: User | null = await MessageSender.getUser();\n        if (user) {\n            this.setState({ user });\n        }\n    }\n\n    private filterTrendingRetailers(retailers: CashbackListRetailer[]): TrendingBrand[] {\n        const trendingBrands: any[] = [];\n        // Iterate through all retailers from cashbacklist\n        for (const retailer of retailers) {\n            // Iterate through all defined authorized providers\n            for (const provider of AUTHORIZED_PROVIDERS) {\n                // Find a deal with authozied provider\n                const deal = _.find(retailer.deals, ['provider', provider]);\n                if (deal) {\n                    trendingBrands.push({\n                        retailerId: parseInt(retailer.retailerId),\n                        retailerUrl: deal.defaultUrl.split('url=')[1] || '',\n                        imageUrl: retailer.images.textLogo,\n                        cashbackTitle: deal.title\n                    });\n                    break;\n                }\n            }\n        }\n        return trendingBrands.slice(0, MAX_CASHBACK_RETAILERS_TO_DISPLAY);\n    }\n\n    render() {\n\n        const retailers: CashbackListRetailer[] = this.props.cashbackList.retailers;\n        const trendingBrands: TrendingBrand[] = this.filterTrendingRetailers(retailers);\n        const trendingBrandsComponents = trendingBrands.map((trendingBrand: TrendingBrand) => {\n            return (\n                <CashbackListRetailerComponent trendingBrand={trendingBrand} />\n            );\n        })\n\n        return (\n            <div id=\"cashback-list-component\">\n                <div className=\"home-earny-logo\">\n                    <img src=\"images/earny-logo.svg\" alt=\"earny-logo\" />\n                </div>\n                <p className=\"cashback-list-title\">This retailer doesnt have any cashback offers. Shop at the following retailers instead:</p>\n                <div id=\"cashback-retailer-list\">\n                    {trendingBrandsComponents}\n                </div>\n            </div>\n        );\n    }\n}","import React from \"react\";\nimport * as _ from 'lodash';\nimport { Retailer } from \"../../../../../common/interfaces\";\nimport { CashbackRate } from '../../../../../common/interfaces/rate';\n\nimport './RetailerActivatedComponent.scss';\n\nconst ProductCategoryRate: React.FC<any> = (props: { rate: CashbackRate }) => {\n    let rateValue: string = (props.rate.kind === 'PERCENTAGE')\n    ? `${props.rate.amount}% cashback`\n    : `$${props.rate.amount}`;\n\n    return (\n        <div className=\"rate\">\n            <h3 className=\"rate-name\">{props.rate.name}</h3>\n            <div className=\"rate-value\">{rateValue}</div>\n        </div>\n    );\n}\n\nconst RetailerLogo: React.FC<{ imageUrl: string; }> = (props) => {\n    const imageUrl = props.imageUrl;\n    const isEarnyLogo = imageUrl.includes('earny-logo-eyebrows');\n    const className = isEarnyLogo ? 'home-earny-logo' : 'home-retailer-logo';\n\n    return (\n        <div className={className}>\n            <img src={props.imageUrl} alt=\"retailer-logo\" />\n        </div>\n    )\n}\n\nexport class RetailerActivatedComponent extends React.Component<{ retailer: Retailer }, {}> {\n\n    constructor(props: { retailer: Retailer }) {\n        super(props);\n        this.state = {}\n    }\n\n    render() {\n        const rates: CashbackRate[] = [];\n        // Build a list of rates, and for rates that have a name\n        // with commas, break it down for nicer display\n        // ex: ['car, beer, toys'] > ['car', 'beer', 'toys]\n        this.props.retailer.rates.forEach(rate => {\n            rate.name.split(',').forEach((splittedRateName) => {\n                const sanitazedName = splittedRateName.replace(\"and\",\"\").trim();\n                rates.push({ ...rate, name: sanitazedName });\n            });\n        });\n        // Order alphabetically and push JSX components\n        const rateList = _.orderBy(rates, [rate => rate.name.toLowerCase()], ['asc']).map((rate) => {\n            return (<ProductCategoryRate rate={rate} />)\n        });\n\n        return (\n            <div id=\"retailer-activated\">\n\n                <RetailerLogo imageUrl={this.props.retailer.retailerImageUrl} />\n\n                <div className=\"header\">\n                    <img src=\"icons/check-icon.svg\" alt=\"\" />\n                    <p>{this.props.retailer.activatedText}</p>\n                </div>\n\n                {rateList}\n\n                <div className=\"cashback-exclusion\">\n                    <p>{this.props.retailer.exclusionText}</p>\n                </div>\n\n            </div>\n        );\n    }\n}","import React from 'react';\n\nimport { PopupMixpanelService } from '../../../services/popup-mixpanel.service';\nimport { Retailer, CashbackList } from '../../../../common/interfaces';\nimport { MessageSender } from '../../../../common/messaging/message-sender';\nimport { CashbackListComponent } from './CashbackList/CashbackList';\nimport { PopupScreen } from '../../PopupScreen';\nimport { RetailerActivatedComponent } from './RetailerActivated/RetailerActivatedComponent';\nimport { RequestSource } from '../../../../common/interfaces/login';\n\nimport './HomeScreen.scss';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\n\ninterface HomeScreenProps {\n\n}\n\ninterface HomeScreenState {\n  loaded: boolean,\n  activeRetailer: Retailer | null,\n  cashbackList: CashbackList | null;\n  canActivateActiveRetailer: boolean,\n  isActiveRetailerActivated: boolean\n}\n\nconst RetailerLogo: React.FC<{ imageUrl: string; }> = (props) => {\n  const imageUrl = props.imageUrl;\n\n  const isEarnyLogo = imageUrl.includes('earny-logo-eyebrows');\n  const className = isEarnyLogo ? 'home-earny-logo' : 'home-retailer-logo';\n\n  return (\n    <div className={className}>\n      <img src={props.imageUrl} alt=\"retailer-logo\" />\n    </div>\n  )\n}\n\n// ===========================================================================================\n// --- HomeScreen\n// ===========================================================================================\nexport class HomeScreen extends PopupScreen<HomeScreenProps, HomeScreenState> {\n\n\n  constructor(props: HomeScreenProps) {\n    super(props, 'home');\n\n    this.state = {\n      loaded: false,\n      activeRetailer: null,\n      cashbackList: null,\n      canActivateActiveRetailer: false,\n      isActiveRetailerActivated: false,\n    };\n  }\n\n  async componentDidMount() {\n    super.componentDidMount();\n\n    let isActiveRetailerActivated: boolean = false;\n    let canActivateActiveRetailer: boolean = false;\n\n    try {\n\n      const [activeRetailer, cashbackList] = await Promise.all([\n        MessageSender.getActiveRetailer(),\n        MessageSender.getCashbackList()\n      ])\n\n      if (activeRetailer) {\n        isActiveRetailerActivated = activeRetailer.isCashbackActivated || false;\n        canActivateActiveRetailer = !isActiveRetailerActivated;\n      }\n\n      this.setState({\n        loaded: true,\n        isActiveRetailerActivated,\n        activeRetailer,\n        cashbackList,\n        canActivateActiveRetailer,\n      });\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n\n  renderCanActivate(activeRetailer: Retailer) {\n    return (\n      <div id=\"home-canvas\">\n        <RetailerLogo imageUrl={activeRetailer.retailerImageUrl} />\n        <button className=\"home-activate-button\" onClick={this.activateActiveRetailer}>{activeRetailer.buttonText}</button>\n        <div className=\"home-activate-text\">\n          <img src=\"images/home/light-bulb-icon.png\" alt=\"light-bulb\"></img>\n          <p>Activate before checkout in order to get cashback</p>\n        </div>\n\n        {activeRetailer.activateCashbackSubscribedCTA &&\n          <div className=\"activate-double-cashback\">\n            <span className=\"double-cashback-title\">{activeRetailer.activateCashbackSubscribedCTA}</span>\n            <div className=\"switch\" onClick={this.activateDoubleCashback}>\n              <div className=\"switch-ball\"></div>\n            </div>\n          </div>\n        }\n      </div>\n    )\n  }\n\n  renderNoCashbackRetailerList(cashbackList: CashbackList) {\n    return (\n      <div id=\"home-canvas\" className=\"scroll-child\">\n        <CashbackListComponent cashbackList={cashbackList} />\n      </div>\n    );\n  }\n\n  renderActivated(activeRetailer: Retailer) {\n    return (\n      <div id=\"home-canvas\" className=\"scroll-child\">\n        <RetailerActivatedComponent retailer={activeRetailer} />\n      </div>\n    )\n  }\n\n  renderNoCashbackAvailable() {\n    return (\n      <div id=\"home-canvas\">\n        <div className=\"home-earny-logo\">\n          <img src=\"images/earny-logo.svg\" alt=\"earny-logo\" />\n        </div>\n        <div className=\"home-no-cashback\">\n          <img src=\"images/home/no-cashback-icon.svg\" alt=\"no-cashback-icon\" width=\"100\" />\n        </div>\n        <div className=\"home-no-cashback-description\">\n          <p>This retailer doesnt have any cashback offers</p>\n        </div>\n      </div>\n    )\n  }\n\n  activateActiveRetailer = async () => {\n    if (!this.state.activeRetailer) return;\n\n    try {\n      PopupMixpanelService.trackActivateCashbackPressed(this.state.activeRetailer);\n      const source = RequestSource.POPUP;\n      const showConfirmation = false;\n      MessageSender.activateCashbackForActiveRetailer(source, showConfirmation)\n      this.setState({\n        isActiveRetailerActivated: true,\n        canActivateActiveRetailer: false\n      });\n\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n  activateDoubleCashback = async () => {\n    if (!this.state.activeRetailer) return;\n\n    try {\n      PopupMixpanelService.trackActivateCashbackUpsellPressed(this.state.activeRetailer);\n\n      const source = RequestSource.POPUP;\n      const showConfirmation = false;\n      MessageSender.activateDoubleCashbackForActiveRetailer(source, showConfirmation);\n\n      window.close();\n\n    } catch (error) {\n      console.log('Error', error);\n    }\n  }\n\n  render() {\n    if (this.state.loaded === false) {\n      return (<></>);\n    }\n\n    const activeRetailer = this.state.activeRetailer;\n\n    if (activeRetailer && this.state.isActiveRetailerActivated) {\n      return this.renderActivated(activeRetailer);\n    }\n    else if (activeRetailer && this.state.canActivateActiveRetailer) {\n      return this.renderCanActivate(activeRetailer);\n    }\n    else if (this.state.cashbackList) {\n      return this.renderNoCashbackRetailerList(this.state.cashbackList);\n    }\n    else {\n      return this.renderNoCashbackAvailable();\n    }\n  }\n}","import React from 'react';\n\nimport './SwitchComponent.scss';\n\ninterface SwitchComponentProps {\n    defaultValue: boolean;\n    onColor: string;\n    offColor: string;\n    handleToggle: (sharingStatus: boolean) => any;\n}\n\ninterface SwitchComponentState {\n    mounted: boolean;\n    isOn: any;\n}\n\nexport class SwitchComponent extends React.Component<SwitchComponentProps, SwitchComponentState> {\n\n    constructor(props: SwitchComponentProps) {\n        super(props);\n        this.state = {\n            mounted: false,\n            isOn: this.props.defaultValue\n        }\n    }\n\n    componentDidUpdate(prevProps: SwitchComponentProps) {\n        if (prevProps.defaultValue !== this.props.defaultValue) {\n            this.setState({ isOn: this.props.defaultValue });\n        }\n    }\n\n    handleChange = () => {\n        const newVal = !this.state.isOn;\n        this.setState({ isOn: newVal, mounted: true });\n        this.props.handleToggle(newVal);\n    }\n\n    render() {\n        const color = this.state.isOn ? this.props.onColor : this.props.offColor;\n\n        return (\n            <>\n                <input\n                    checked={this.state.isOn}\n                    onChange={this.handleChange}\n                    className=\"react-switch-checkbox\"\n                    id={`react-switch-new`}\n                    type=\"checkbox\"\n                />\n                <label\n                    style={{ background: color }}\n                    className=\"react-switch-label\"\n                    htmlFor={`react-switch-new`}\n                >\n                    <span className={this.state.mounted ? 'react-switch-button mounted' : 'react-switch-button'} />\n                </label>\n            </>\n        );\n    }\n};\n","import EY from '../EY';\n\n// ===========================================================================================\n// --- BrowserService\n// ===========================================================================================\nexport class BrowserService {\n\n    public static badgeColors = {\n        blue: '#0070F4',\n        green: '#19A388'\n    }\n\n    public getExtensionVersion() {\n        if (!chrome || !chrome.runtime.getManifest) return 'v0.0.local';\n        const version = chrome.runtime.getManifest().version;\n        return version ? `v${version}` : '';\n    }\n\n    public async updateStorage(key: string, value: any): Promise<void> {\n        chrome.storage.local.set({ [key]: value });\n    }\n\n    public async batchUpdateStorage(batch: any): Promise<void> {\n        chrome.storage.local.set(batch);\n    }\n\n    public async removeFromLocalStorage(key: string): Promise<void> {\n        chrome.storage.local.remove(key);\n    }\n\n    public async getStorageData<T>(key: string): Promise<T | null> {\n        if (!chrome || !chrome.storage) throw new Error('Chrome API is unavailable');\n        return new Promise((resolve, reject) => {\n            chrome.storage.local.get(key, (data: any) => {\n                if (data) {\n                    if (data[key] === undefined) {\n                        return resolve(null);\n                    } else {\n                        resolve(data[key]);\n                    }\n                }\n                else reject(new Error(`The key ${key} was not found in localstorage`));\n            });\n        })\n    }\n\n    public async dumpStorageData(): Promise<any> {\n        if (!chrome || !chrome.storage) throw new Error('Chrome API is unavailable');\n        return new Promise((resolve, reject) => {\n            chrome.storage.local.get(null, (data: any) => {\n                if (data) {\n                    resolve(data);\n                }\n                else reject(new Error(`Could not dump localstorage`));\n            });\n        })\n    }\n\n    public async setStorageData<T>(key: string, value: T): Promise<void> {\n        if (!chrome || !chrome.storage) throw new Error('Chrome API is unavailable');\n        return new Promise((resolve) => {\n            chrome.storage.local.set({ [key]: value }, () => {\n                resolve();\n            });\n        })\n    }\n\n    public decodeCookieBody(cookie: chrome.cookies.Cookie | null): any {\n        if (!cookie || !cookie.value) return null;\n        return JSON.parse(decodeURIComponent(cookie.value));\n    }\n\n    public encodeCookieBody(body: any): string {\n        return encodeURIComponent(JSON.stringify(body));\n    }\n\n    public async getCookie(url: string, name: string): Promise<chrome.cookies.Cookie | null> {\n        return new Promise((resolve) => {\n            chrome.cookies.get({ url, name }, (cookie: chrome.cookies.Cookie | null) => {\n                if (cookie) {\n                    resolve(cookie);\n                } else {\n                    resolve(null);\n                }\n            });\n        });\n    }\n\n    public async setCookie(url: string, name: string, domain: string, value: any, expirationDate?: number): Promise<boolean> {\n        const cookie = {\n            url,\n            name,\n            domain,\n            value: this.encodeCookieBody(value),\n            expirationDate\n        };\n\n        return new Promise((resolve) => {\n            chrome.cookies.set(cookie, (cookie: chrome.cookies.Cookie | null) => {\n                if (cookie) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n            });\n        });\n    }\n\n    public async getAllTabs(): Promise<chrome.tabs.Tab[]> {\n        return new Promise((resolve, reject) => {\n            chrome.tabs.query({}, (tabs: chrome.tabs.Tab[]) => {\n                if (tabs) resolve(tabs);\n                else reject(new Error('Could not retrieve tabs'));\n            });\n        });\n    }\n\n    public async getCurrentActiveTab(): Promise<chrome.tabs.Tab> {\n        return new Promise((resolve, reject) => {\n            chrome.tabs.query({ active: true, currentWindow: true }, (tabs: chrome.tabs.Tab[]) => {\n                const currentTab = tabs[0];\n                if (currentTab) resolve(currentTab);\n                else reject(new Error('Could not retrieve current Tab'));\n            });\n        });\n    }\n\n    public async getCurrentActiveTabId(): Promise<number> {\n        const tab = await this.getCurrentActiveTab();\n        if (!tab.id) throw new Error('Could not retrieve current Tab Id');\n        return tab.id;\n    }\n\n    public async getCurrentActiveTabUrl(): Promise<string> {\n        const tab = await this.getCurrentActiveTab();\n        if (!tab.url) throw new Error('Could not retrieve current Tab url');\n        return tab.url;\n    }\n\n    public async updateTab(tabId: any, newUrl: string): Promise<void> {\n        if (!chrome || !chrome.tabs) throw new Error('Chrome API is unavailable');\n        return new Promise((resolve) => {\n            chrome.tabs.update(tabId, { url: newUrl }, () => {\n                resolve();\n            });\n        });\n    }\n\n    public async updateTabAndWaitUntilPageIsLoaded(tabId: any, newUrl: string): Promise<void> {\n        if (!chrome || !chrome.tabs) throw new Error('Chrome API is unavailable');\n        return new Promise((resolve) => {\n            chrome.tabs.update(tabId, { url: newUrl }, (tab?: chrome.tabs.Tab) => {\n                chrome.tabs.onUpdated.addListener(function listener(tabId, info) {\n                    if (info.status === 'complete' && tab && tabId === tab.id) {\n                        chrome.tabs.onUpdated.removeListener(listener);\n                        resolve();\n                    }\n                });\n            });\n        });\n    }\n\n    public navigateToExternalUrl(url: string, inNewTab = false, wait = false) {\n        if (!chrome || !chrome.tabs) throw new Error('Chrome API is unavailable');\n\n        if (!wait) {\n            if (inNewTab) return chrome.tabs.create({ url });\n            chrome.tabs.update({ url });\n        } else {\n            if (inNewTab) {\n                return new Promise((resolve) => {\n                    chrome.tabs.create({ url }, (createdTab?: chrome.tabs.Tab) => {\n                        chrome.tabs.onUpdated.addListener(function listener(tabId, info) {\n                            if (info.status === 'complete' && createdTab && createdTab.id === tabId) {\n                                chrome.tabs.onUpdated.removeListener(listener);\n                                resolve();\n                            }\n                        });\n                    });\n                });\n            } else {\n                return new Promise((resolve) => {\n                    chrome.tabs.update({ url }, (updatedTab?: chrome.tabs.Tab) => {\n                        chrome.tabs.onUpdated.addListener(function listener(tabId, info) {\n                            if (info.status === 'complete' && updatedTab && updatedTab.id === tabId) {\n                                chrome.tabs.onUpdated.removeListener(listener);\n                                resolve();\n                            }\n                        });\n                    });\n                });\n            }\n        }\n    }\n\n    public async getSharingStatus(): Promise<boolean> {\n        return new Promise((resolve) => {\n            chrome.storage.local.get(\"sharingStatus\", (data: any) => {\n                if (data && data.sharingStatus) resolve(data.sharingStatus);\n                else resolve(false);\n            });\n        });\n    }\n\n    public async setSharingStatus(isEnabled: boolean): Promise<void> {\n        return new Promise((resolve) => {\n            chrome.storage.local.set({ sharingStatus: isEnabled }, () => {\n                resolve();\n            });\n        });\n    }\n\n    public static clearLocalStorage() {\n        chrome.storage.local.clear(() => { });\n    }\n\n    public async setBadge(text: string, tabId: number): Promise<void> {\n        await chrome.browserAction.setBadgeText({ text, tabId });\n    }\n\n    public async setBrowserNotificationBanner(options: chrome.notifications.NotificationOptions) {\n        chrome.notifications.create('', options);\n    }\n\n    public async setBadgeBackgroundColor(colorHex: string): Promise<void> {\n        await chrome.browserAction.setBadgeBackgroundColor({ color: colorHex });\n    }\n\n    public async setGreyEarnyIcon() {\n        await chrome.browserAction.setIcon({ path: 'icons/icon-grey.png' });\n    }\n\n    public async setYellowEarnyIcon() {\n        await chrome.browserAction.setIcon({ path: 'icons/logo-80.png' });\n    }\n\n    public async requestMinimizeEarnyWidget() {\n        const currentTab = await this.getCurrentActiveTab();\n        return new Promise((resolve, reject) => {\n            if (!currentTab || !currentTab.id) {\n                return reject(new Error('Unable to retrieve current tab'));\n            }\n            chrome.tabs.sendMessage(currentTab.id, { type: 'minimizeEarnyWidget' }, () => {\n                if (chrome.runtime.lastError) {\n                    reject(chrome.runtime.lastError);\n                };\n                resolve();\n            });\n        });\n    }\n\n    public async getStartupModalShown(): Promise<boolean> {\n        const shown: boolean | null = await this.getStorageData<boolean>(EY.StorageKeys.STORAGE_KEY_STARTUP_MODAL_SHOWN);\n        if (!shown) return false;\n        return shown;\n    }\n\n    public async setStartupModalShown(): Promise<void> {\n        return this.setStorageData(EY.StorageKeys.STORAGE_KEY_STARTUP_MODAL_SHOWN, true);\n    }\n\n    public setUninstallUrl(userId?: string) {\n        const version = this.getExtensionVersion();\n        if (userId) {\n            chrome.runtime.setUninstallURL(`${EY.Urls.EARNY_UNINSTALL_URL}?userId=${userId}&version=${version}`);\n        } else {\n            chrome.runtime.setUninstallURL(`${EY.Urls.EARNY_UNINSTALL_URL}?version=${version}`);\n        }\n    }\n}\n","import React from \"react\";\nimport Lottie from \"react-lottie\";\n\nimport { SwitchComponent } from \"../../../../common/react/SwitchComponent/SwitchComponent\";\nimport wildlinkAnimation from \"../../../public/lotties/wildlink-animation-mobile.json\";\nimport { MessageSender } from \"../../../../common/messaging/message-sender\";\nimport { BrowserService } from \"../../../../common/services/browser.service\";\nimport { PopupScreen } from \"../../PopupScreen\";\n\nimport './ShareScreen.scss';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\ninterface ShareScreenProps {\n\n}\n\ninterface ShareScreenState {\n  isSharingEnabled: boolean\n}\n\nconst browserService = new BrowserService();\n\n// ===========================================================================================\n// --- ShareScreen\n// ===========================================================================================\nfunction ShareDetail(props: any) {\n  return (\n    <div className=\"share-detail-inline\">\n      <div className=\"share-detail-number\"><span>{props.number}</span></div>\n      <div className=\"share-detail-description\">\n        <p>{props.text}</p>\n      </div>\n    </div>\n  );\n}\n\nexport class ShareScreen extends PopupScreen<ShareScreenProps, ShareScreenState>{\n\n  constructor(props: ShareScreenProps) {\n    super(props, 'share');\n\n    this.state = {\n      isSharingEnabled: false\n    };\n  }\n\n  async componentDidMount() {\n    super.componentDidMount();\n\n    let isSharingEnabled: boolean = await browserService.getSharingStatus();\n    this.setState({ isSharingEnabled });\n  }\n\n  handleSharingChange = async (sharingStatus: boolean) => {\n    await MessageSender.updateLinkSharing(sharingStatus);\n  }\n\n  render() {\n    const animation = {\n      loop: true,\n      autoplay: true,\n      animationData: wildlinkAnimation,\n      rendererSettings: {\n        preserveAspectRatio: \"xMidYMid slice\"\n      }\n    };\n\n    return (\n      <div id=\"share-canvas\">\n        <div className=\"share-banner-container\">\n          <Lottie options={animation} height={150} />\n        </div>\n        <div className=\"share-title\">\n          <p>Get cashback when your friends shop with your links</p>\n        </div>\n        <div className=\"share-details-list\">\n          <ShareDetail number=\"1\" text=\"Browse a covered retailer like usual\" />\n          <ShareDetail number=\"2\" text=\"Copy and paste URLs into emails, texts, or on social media\" />\n          <ShareDetail number=\"3\" text='Share with friends and get cashback when they make purchases' />\n        </div>\n        <div className=\"share-switch-container\">\n          <SwitchComponent\n            defaultValue={this.state.isSharingEnabled}\n            onColor=\"#3ae0c0\"\n            offColor=\"#edf2f8\"\n            handleToggle={this.handleSharingChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}","import React from \"react\";\nimport Lottie from \"react-lottie\";\nimport linkboxAnimation from '../../../../public/lotties/linkbox-animation.json';\n\nimport { BrowserService } from '../../../../../common/services/browser.service';\nimport { PopupMixpanelService } from \"../../../../services/popup-mixpanel.service\";\n\nimport './Linkbox.scss';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\n\nconst browserService = new BrowserService();\n\nconst SHARE_FACEBOOK_COPY = 'Check out this free Chrome extension that gets you cashback when shopping online. Ill also get $5 if you get cashback using it.';\nconst SHARE_TWITTER_COPY = 'Check out this free Chrome extension that gets you cashback when shopping online. Ill also get $5 if you get cashback using it ';\nconst SHARE_EMAIL_SUBJECT_LINE = 'Thought you might like this';\nconst SHARE_EMAIL_COPY = 'Hey ___, I just started using this cool Chrome extension for getting cashback when shopping online. It lets you add items to a watchlist, recommends when to buy stuff, and its free. Use my link so I can get $5 if you get cashback using it!';\n\ninterface EarnyLinkBoxProps {\n    referralLinkUrl: string;\n}\n\ninterface EarnyLinkBoxState {\n    copied: boolean;\n}\n\nconst copyTextToClipBoard = (text: string) => {\n    var input = document.createElement('input');\n    input.setAttribute('value', text);\n    document.body.appendChild(input);\n    input.select();\n    document.execCommand('copy');\n    document.body.removeChild(input);\n}\n\n// ===========================================================================================\n// --- EarnyLinkBox\n// ===========================================================================================\nexport class EarnyLinkBox extends React.Component<EarnyLinkBoxProps, EarnyLinkBoxState> {\n\n    constructor(props: EarnyLinkBoxProps) {\n        super(props);\n\n        this.state = {\n            copied: false,\n        };\n    }\n\n    copyEarnyLink = () => {\n        if (this.state.copied === false) {\n            copyTextToClipBoard(this.props.referralLinkUrl);\n            this.setState({ copied: true });\n\n            setTimeout(() => {\n                this.setState({ copied: false });\n            }, 2000);\n        }\n    }\n\n    handleFacebookClick = () => {\n        const text = encodeURIComponent(SHARE_FACEBOOK_COPY);\n        const url = encodeURI(this.props.referralLinkUrl);\n        const facebookSharingURL = `https://www.facebook.com/share.php?u=${url}&quote=${text}`;\n        PopupMixpanelService.trackFriendReferralsShareViaPressed('Facebook');\n        browserService.navigateToExternalUrl(facebookSharingURL, true);\n    }\n\n    handleTwitterClick = () => {\n        const text = encodeURIComponent(SHARE_TWITTER_COPY);\n        const url = encodeURI(this.props.referralLinkUrl);\n        const twitterSharingURL = `https://twitter.com/intent/tweet?&text=${text}&url=${url}`;\n        PopupMixpanelService.trackFriendReferralsShareViaPressed('Twitter');\n\n        browserService.navigateToExternalUrl(twitterSharingURL, true);\n    }\n\n    handleMailClick = () => {\n        const url = this.props.referralLinkUrl;\n        const text = encodeURIComponent(SHARE_EMAIL_COPY.replace('**link**', url));\n        const mailSharingUrl = `mailto:?to=&body=${text}&subject=${SHARE_EMAIL_SUBJECT_LINE}`;\n        PopupMixpanelService.trackFriendReferralsShareViaPressed('Email');\n        browserService.navigateToExternalUrl(mailSharingUrl, true);\n    }\n\n    render() {\n        const animation = {\n            loop: true,\n            autoplay: true,\n            animationData: linkboxAnimation,\n            rendererSettings: {\n                className: 'lottie',\n                preserveAspectRatio: \"xMidYMid slice\"\n            }\n        };\n\n        const personalLink = this.props.referralLinkUrl;\n        const personalLinkTruncated = (personalLink.length > 27) ? (personalLink.substr(0, 27) + '...') : personalLink;\n\n        return (\n            <div id=\"earny-link-box\" >\n\n                <h3>How many friends do you have?</h3>\n\n                <Lottie options={animation} height={122} />\n\n                <div className=\"bottom\">\n                    <p className=\"friend-referral\">\n                        <b>Get <span style={{ color: '#19a388' }}>$5</span> for every friend </b>\n                        you refer that makes a cashback purchase.&nbsp;\n                        <a target=\"_blank\" href=\" https://support.earny.co/hc/en-us/articles/360000982033\">\n                            Learn more\n                        </a>\n                    </p>\n\n                    <div className=\"copy-link\">\n                        <div className=\"link\">{personalLinkTruncated}</div>\n                        <button\n                            disabled={this.state.copied}\n                            className={'copy-button ' + (this.state.copied ? 'copied' : '')}\n                            onClick={this.copyEarnyLink}>{this.state.copied ? 'Copied' : 'Copy'}</button>\n                    </div>\n\n                    <div className=\"social-media\">\n                        <button onClick={this.handleFacebookClick}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"21\" height=\"21\" viewBox=\"0 0 21 21\">\n                                <g fill=\"none\" fill-rule=\"nonzero\">\n                                    <path fill=\"#4267B2\" d=\"M1.596.5A1.104 1.104 0 0 0 .5 1.604v17.8A1.104 1.104 0 0 0 1.604 20.5h9.58v-7.734h-2.6V9.738h2.6V7.51c0-2.582 1.578-3.99 3.882-3.99.778-.003 1.555.037 2.328.12v2.7h-1.588c-1.254 0-1.498.6-1.498 1.47v1.928H17.3l-.4 3.028h-2.6V20.5h5.096c.61 0 1.104-.494 1.104-1.104v-17.8A1.104 1.104 0 0 0 19.396.5h-17.8z\" />\n                                    <path fill=\"#FFF\" d=\"M14.3 20.5v-7.734h2.6l.4-3.028h-3V7.81c0-.874.244-1.47 1.498-1.47h1.588v-2.7a20.914 20.914 0 0 0-2.328-.12c-2.304 0-3.882 1.4-3.882 3.99v2.228h-2.6v3.028h2.6V20.5H14.3z\" />\n                                </g>\n                            </svg>\n                        </button>\n                        <button onClick={this.handleTwitterClick}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"21\" viewBox=\"0 0 25 21\">\n                                <path fill=\"#1DA1F2\" fill-rule=\"nonzero\" d=\"M7.973 20.5c9.289 0 14.369-7.695 14.369-14.368 0-.219 0-.437-.015-.653.988-.715 1.842-1.6 2.52-2.614-.922.408-1.9.676-2.9.794a5.067 5.067 0 0 0 2.22-2.793 10.12 10.12 0 0 1-3.207 1.226 5.055 5.055 0 0 0-8.606 4.606A14.337 14.337 0 0 1 1.946 1.422a5.054 5.054 0 0 0 1.564 6.74 5.012 5.012 0 0 1-2.292-.631v.064a5.052 5.052 0 0 0 4.05 4.95 5.042 5.042 0 0 1-2.28.087 5.056 5.056 0 0 0 4.719 3.506 10.133 10.133 0 0 1-7.474 2.094 14.297 14.297 0 0 0 7.74 2.264\" />\n                            </svg>\n                        </button >\n                        <button onClick={this.handleMailClick}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"29\" height=\"21\" viewBox=\"0 0 29 21\">\n                                <path fill=\"#FF6060\" fill-rule=\"evenodd\" d=\"M28.5 3.5v14a3 3 0 0 1-3 3h-22a3 3 0 0 1-3-3v-14c0-.503.124-.977.343-1.394l12.835 8.909a.92.92 0 0 0 .58.163.916.916 0 0 0 .581-.163l13.179-9.147c.305.47.482 1.03.482 1.632zm-3-3c.287 0 .565.04.828.116L14.259 8.99 2.351.728A2.991 2.991 0 0 1 3.5.5h22z\" />\n                            </svg>\n                        </button >\n                    </div >\n                </div>\n            </div>\n        );\n    }\n}","\nimport React from 'react';\nimport Lottie from 'react-lottie';\n\nimport './ProfileCard.scss';\n\ninterface ProfileCardProps {\n    children?: any;\n    onCTAClicked: () => void;\n    bannerImg: string;\n    ctaText: string;\n    lottieAnimationData?: any;\n}\n\nexport const SubscriptionCard: React.FC<ProfileCardProps> = (props: ProfileCardProps) => {\n    let animation;\n\n    if (props.lottieAnimationData) {\n        animation = {\n            loop: true,\n            autoplay: true,\n            animationData: props.lottieAnimationData,\n            rendererSettings: {\n                className: 'lottie',\n                preserveAspectRatio: \"xMidYMid slice\"\n            }\n        };\n    }\n\n    return (\n        <div className=\"profile-card\">\n\n            <div className={animation ? 'banner with-animation' : 'banner'} >\n                <img src={props.bannerImg} alt=\"\" />\n                {animation &&\n                    <div className=\"lottie\">\n                        <Lottie options={animation} isClickToPauseDisabled={true} />\n                    </div>\n                }\n            </div>\n\n            <div className=\"card-content\">\n                {props.children}\n                <button className=\"cta-button\" onClick={props.onCTAClicked}>\n                    {props.ctaText}\n                </button>\n            </div>\n        </div>\n    );\n}","import React from \"react\";\nimport EY from \"../../../../../../common/EY\";\nimport { BrowserService } from \"../../../../../../common/services/browser.service\";\nimport { SubscriptionCard } from \"../ProfileCard\";\n\nimport earnyPlusAnimation from '../../../../../public/lotties/profile-subscription-animation.json';\nimport { PopupMixpanelService } from \"../../../../../services/popup-mixpanel.service\";\n\nconst browserService = new BrowserService();\n\nexport class EarnyPlusCard extends React.Component<any, any> {\n\n    handleCTAClick = async () => {\n        PopupMixpanelService.trackActivateCashbackUpsellPressed()\n        browserService.navigateToExternalUrl(EY.Urls.EARNY_PLAN_URL, true);\n        window.close();\n    }\n\n    render() {\n        return (\n            <SubscriptionCard\n                onCTAClicked={this.handleCTAClick}\n                bannerImg={'images/profile/subscription-card-purple.svg'}\n                lottieAnimationData={earnyPlusAnimation}\n                ctaText={'Activate'}\n            >\n                <h3>Now get 2X cashback</h3>\n                <p>Don't miss out on earning even more cashback when you shop online</p>\n            </SubscriptionCard>\n        );\n    }\n}","import React from 'react';\nimport styled from 'styled-components';\n\ninterface EarnyPlusTextProps {\n    fontSize: number,\n    fontWeight: number,\n    textBefore?: string,\n    textAfter?: string\n}\n\n/**\n * Just some text that includes Earny+\n */\nexport const EarnyPlusText: React.FC<EarnyPlusTextProps> = ({ fontSize, fontWeight, textBefore, textAfter }) => {\n    const Paragraph = styled.p`\n        font-family: 'Montserrat';\n        font-size: ${fontSize}px !important;\n        font-weight: ${fontWeight} !important;\n    `;\n\n    const Span = styled.span`\n        vertical-align: top;\n        line-height: 14px;\n        font-size: 30px;\n        font-weight: 900;\n        color: #3AE0C0;\n    `;\n\n    return (\n        <Paragraph className=\"earny-plus-text\">\n            {textBefore &&\n                <>{textBefore}{' '} </>\n            }\n            Earny<Span>+</Span>\n            {textAfter &&\n                <>{' '}{textAfter}</>\n            }\n        </Paragraph>\n    )\n}","import React, { useEffect, useState } from \"react\";\nimport styled, { css, keyframes } from \"styled-components\";\n\nexport const FadeAnimation = (props) => {\n\n    const [render, setRender] = useState(props.show);\n\n    useEffect(() => {\n        if (props.show) setRender(true);\n    }, [props.show]);\n\n    const onAnimationEnd = () => {\n        if (props.onAnimationEnded) props.onAnimationEnded();\n        if (!props.show) setRender(false);\n    };\n\n    const fadeInKeyFrame = keyframes`\n        0% { opacity: 0; }\n        100% { opacity: 1; }\n    `;\n\n    const fadeOutKeyFrame = keyframes`\n        0% { opacity: 1; }\n        100% { opacity: 0; }\n    `;\n\n    const fadeIn = css`\n        ${fadeInKeyFrame} 0.3s;\n    `;\n\n    const fadeOut = css`\n        ${fadeOutKeyFrame} 0.3s;\n    `;\n\n    const Container = styled.div`\n        animation: ${propz => {\n            if (propz.fade === 'fadeIn') return fadeIn;\n            if (propz.fade === 'fadeOut') return fadeOut;\n        }};\n    `;\n\n    return (\n        render && (\n            <Container fade={props.show ? 'fadeIn' : 'fadeOut'} onAnimationEnd={onAnimationEnd}>\n                {props.children}\n            </Container>\n        )\n    );\n}","import React from \"react\";\nimport { PopupMixpanelService } from \"../../../../../services/popup-mixpanel.service\";\nimport { MessageSender } from \"../../../../../../common/messaging/message-sender\";\nimport { SubscriptionCard } from \"../ProfileCard\";\nimport { EarnyPlusText } from \"../../../../../../common/react/EarnyPlusTest/EarnyPlusText\";\nimport { FadeAnimation } from \"../../../../../../common/react/FadeAnimation/FadeAnimation\";\n\nimport freeSubscriptionAnimation from '../../../../../public/lotties/profile-free-subscription-animation.json';\n\nexport class FreeSubscriptionCard extends React.Component<{ enabled: boolean }, { show: boolean, showConfirmation: boolean }> {\n\n    constructor(props: any) {\n      super(props);\n\n      this.state = {\n        show: this.props.enabled,\n        showConfirmation: false\n      };\n    }\n\n    handleCTAClicked = async () => {\n      PopupMixpanelService.trackFreeSubscriptionActionPressed();\n\n      if (await MessageSender.requestActivateFreeEarnyPlus()) {\n        this.setState({\n          show: false,\n          showConfirmation: true\n        });\n      }\n    }\n\n    render() {\n      const style = {\n        minHeight: !this.state.show && !this.state.showConfirmation ? '0px' : '375px'\n      };\n\n      return (\n        <div id=\"free-subscription-card\" style={style}>\n          {this.state.show &&\n            <SubscriptionCard\n              onCTAClicked={this.handleCTAClicked}\n              bannerImg={'images/profile/subscription-card-green.svg'}\n              lottieAnimationData={freeSubscriptionAnimation}\n              ctaText={'Activate'}\n            >\n              <EarnyPlusText fontSize={20} fontWeight={700} textBefore={'Get 1 FREE month of '} />\n              <p>Earn 2X cashback for a month on us and see how much you can save</p>\n\n            </SubscriptionCard>\n          }\n\n          <FadeAnimation show={this.state.showConfirmation}>\n            <SubscriptionCard\n              onCTAClicked={() => this.setState({ showConfirmation: false })}\n              bannerImg={'images/profile/subscription-card-success.svg'}\n              ctaText={'Okay'} >\n              <EarnyPlusText textBefore={'Free month of'} textAfter={'activated!'} fontSize={18} fontWeight={700} />\n              <p>You'll now see 2X cashback rates when you shop on desktop or in the app</p>\n            </SubscriptionCard>\n          </FadeAnimation>\n\n        </div>\n      );\n    }\n  }","import React from \"react\";\nimport { AccountBalance } from \"../../../../../common/interfaces\";\nimport { Profile } from '../../../../../common/interfaces/profile';\n\nimport './EarningsSummary.scss';\n\nexport class EarningsSummary extends React.Component<{ profile: Profile }, any> {\n\n    render() {\n        const accountBalance: AccountBalance | undefined = this.props.profile.accountBalance;\n        const lifetimeBalance: string = accountBalance ? accountBalance.lifetimeBalance.value : '$0';\n        const currentBalance: string = accountBalance ? accountBalance.currentBalance.value : '$0';\n        const pendingBalance: string = accountBalance ? accountBalance.pendingBalance.value : '$0';\n\n        return (\n            <div id=\"earnings\">\n                <div className=\"earning\">\n                    <img src=\"images/profile/current-icon.svg\" alt=\"Current\" />\n                    <h3>CURRENT</h3>\n                    <h2>{currentBalance}</h2>\n                </div>\n                <div className=\"earning\">\n                    <img src=\"images/profile/pending-icon.svg\" alt=\"Pending\" />\n                    <h3>PENDING</h3>\n                    <h2>{pendingBalance}</h2>\n                </div>\n                <div className=\"earning\">\n                    <img src=\"images/profile/lifetime-icon.svg\" alt=\"Lifetime\" />\n                    <h3>LIFETIME</h3>\n                    <h2>{lifetimeBalance}</h2>\n                </div>\n            </div>\n        );\n    }\n}","import React from \"react\";\nimport EY from \"../../../../../common/EY\";\nimport { PopupMixpanelService } from \"../../../../services/popup-mixpanel.service\";\nimport { BrowserService } from \"../../../../../common/services/browser.service\";\nimport { EarnyPlusText } from \"../../../../../common/react/EarnyPlusTest/EarnyPlusText\";\n\nimport './SettingScreenLinks.scss';\n\nconst browserService = new BrowserService();\n\nconst SettingsScreenLink: React.FC<any> = (props: any) => {\n    return (\n        <button className=\"settings-screen-link\" onClick={props.onClick}>\n            {props.children}\n        </button>\n    )\n}\n\nexport class SettingScreenLinks extends React.Component<{ isSubscribed: boolean }, any> {\n\n    handleHelpClick = async () => {\n        PopupMixpanelService.trackHelpButtonPressed();\n        browserService.navigateToExternalUrl(EY.Urls.EARNY_SUPPORT_URL, true);\n    }\n\n    handleSettingsClick = async () => {\n        PopupMixpanelService.trackSettingsButtonPressed();\n        browserService.navigateToExternalUrl(EY.Urls.EARNY_SETTINGS_PAGE_URL, true);\n    }\n\n    handleEarnyPlusClick = async () => {\n        PopupMixpanelService.trackEarnyPlusButtonPressed();\n\n        if (this.props.isSubscribed) {\n            browserService.navigateToExternalUrl(EY.Urls.EARNY_ACCOUNT_PLAN_URL, true);\n        } else {\n            browserService.navigateToExternalUrl(EY.Urls.EARNY_PLAN_URL, true);\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"setting-screen-links\">\n                <SettingsScreenLink onClick={this.handleEarnyPlusClick}>\n                    <EarnyPlusText fontSize={16} fontWeight={600} />\n                </SettingsScreenLink>\n\n                <SettingsScreenLink onClick={this.handleHelpClick}>\n                    FAQs\n                </SettingsScreenLink>\n\n                <SettingsScreenLink onClick={this.handleSettingsClick}>\n                    Settings\n                </SettingsScreenLink>\n            </div>\n        );\n    }\n}","import React from \"react\";\nimport { Profile, AccountBalance, Email } from \"../../../../../common/interfaces\";\nimport { PopupMixpanelService } from \"../../../../services/popup-mixpanel.service\";\nimport { BrowserService } from \"../../../../../common/services/browser.service\";\n\nimport './CashoutComponent.scss';\n\nconst browserService = new BrowserService();\n\nexport class CashoutComponent extends React.Component<{ profile: Profile; canCashout: boolean; }, {}> {\n\n    cashOut = async () => {\n        const cashoutEmail: Email = this.props.profile.accountBalance!.cashout.email;\n        const recipient: string = encodeURIComponent(cashoutEmail.recipient);\n        const body: string = encodeURIComponent(cashoutEmail.body);\n        const subject: string = encodeURIComponent(cashoutEmail.subject);\n        const url = `mailto:?to=${recipient}&body=${body}&subject=${subject}`;\n        browserService.navigateToExternalUrl(url, true);\n        PopupMixpanelService.trackCashbackBalanceCashOutPressed();\n    }\n\n    render() {\n\n        const accountBalance: AccountBalance | undefined = this.props.profile.accountBalance;\n        const cashoutTitle: string = accountBalance ? accountBalance.title : '';\n        const cashoutDescription: string = accountBalance ? accountBalance.description : '';\n\n        return (\n            <>\n                <div id=\"cashout-description\">\n\n                    {this.props.canCashout &&\n                        <img src=\"images/profile/cashout-eligible.svg\" alt=\"cashout-eligible\"></img>\n                    }\n\n                    {!this.props.canCashout &&\n                        <img src=\"images/profile/cashout-ineligible.svg\" alt=\"cashout-ineligible\"></img>\n                    }\n\n                    <div className=\"cashout-texts\">\n                        <p className=\"cashout-title\">{cashoutTitle}</p>\n                        <p className=\"cashout-description\">\n                            {cashoutDescription}.&nbsp;\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://support.earny.co/hc/en-us/articles/360036479894-How-do-I-see-and-collect-my-Earnings-balance-\">\n                                Learn more\n                    </a>\n                        </p>\n                    </div>\n                </div>\n\n                <button\n                    id=\"cashout\"\n                    onClick={this.cashOut}\n                    disabled={!this.props.canCashout}\n                    className={this.props.canCashout ? 'can-cashout' : ''}>\n                    Cash Out\n                </button>\n            </>\n        );\n    }\n}","import React from \"react\";\nimport SyncLoader from \"react-spinners/SyncLoader\";\nimport EY from \"../../../../common/EY\";\n\nimport { PopupScreen } from \"../../PopupScreen\";\nimport { PopupMixpanelService } from '../../../services/popup-mixpanel.service';\nimport { BrowserService } from \"../../../../common/services/browser.service\";\nimport { MessageSender } from '../../../../common/messaging/message-sender';\nimport { User } from \"../../../../common/interfaces\";\nimport { EarnyLinkBox } from \"./Linkbox/Linkbox\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { Profile } from \"../../../../common/interfaces/profile\";\nimport { EarnyPlusCard } from \"./ProfileCards/Cards/EarnyPlusCard\";\nimport { FreeSubscriptionCard } from \"./ProfileCards/Cards/FreeSubscriptionCard\";\nimport { EarningsSummary } from './Earnings/EarningsSummary';\nimport { SettingScreenLinks } from './Links/SettingScreenLinks';\nimport { CashoutComponent } from \"./Cashout/CashoutComponent\";\n\nimport './ProfileScreen.scss';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\n\nconst browserService = new BrowserService();\n\nconst version = browserService.getExtensionVersion();\ninterface ProfileScreenProps extends RouteComponentProps<any> {\n\n}\n\ninterface ProfileScreenState {\n  loaded: boolean;\n  user?: User;\n  profile?: Profile;\n  canCashout: boolean;\n  isSubscribed: boolean;\n  showActivateFreeMonth: boolean;\n  showActivateEarnyPlus: boolean;\n  showFreeMonthActivatedConfirmation: boolean;\n}\n\n// ===========================================================================================\n// --- ProfileScreen\n// ===========================================================================================\nexport class ProfileScreen extends PopupScreen<ProfileScreenProps, ProfileScreenState> {\n\n  constructor(props: ProfileScreenProps) {\n    super(props, 'profile');\n\n    this.state = {\n      loaded: false,\n      canCashout: false,\n      isSubscribed: false,\n      showActivateFreeMonth: false,\n      showActivateEarnyPlus: false,\n      showFreeMonthActivatedConfirmation: false\n    }\n  }\n\n  async componentDidMount() {\n    super.componentDidMount();\n\n    try {\n\n      const [user, profile] = await Promise.all([\n        MessageSender.getUser(),\n        MessageSender.getProfile()\n      ])\n\n      if (!user || !profile) return;\n\n\n      console.log('user', user);\n\n      const userHadASubscription: boolean = user.userData !== undefined && user.userData.user.status_map.subscription.has_subscribed;\n      const isSubscribed: boolean = user.userData !== undefined && user.userData.user.status_map.subscription.linked;\n      const showActivateFreeMonth: boolean = !userHadASubscription;\n      const showActivateEarnyPlus: boolean = !showActivateFreeMonth && !isSubscribed;\n\n      const newState = {\n        user,\n        canCashout: false,\n        isSubscribed,\n        loaded: true,\n        profile,\n        showActivateFreeMonth,\n        showActivateEarnyPlus\n      };\n\n      if (profile && profile.accountBalance) {\n        newState.canCashout = profile.accountBalance.cashout.allowed;\n      }\n\n      this.setState(newState);\n    } catch (error) {\n\n    }\n  }\n\n  handleAppStoreClick = async () => {\n    PopupMixpanelService.trackiOSAppStoreButtonPressed();\n    browserService.navigateToExternalUrl(EY.Urls.EARNY_APP_IOS_STORE_URL, true);\n  }\n\n  handleAndroidStoreClick = async () => {\n    PopupMixpanelService.trackAndroidAppStoreButtonPressed();\n    browserService.navigateToExternalUrl(EY.Urls.EARNY_APP_ANDROID_STORE_URL, true);\n  }\n\n  // handleFriendReferralEarningsClick = async () => {\n  //   this.props.history.push('/profile/friend-referral-earnings', {});\n  // }\n\n\n  renderSettingsScreen = () => {\n    const profile: Profile = this.state.profile!;\n\n    return (\n      <div id=\"profile-canvas\">\n\n        {this.state.user &&\n          <h3 className=\"user-name\">\n            {this.state.user.firstName} {this.state.user.lastName}\n          </h3>\n        }\n\n        <EarningsSummary profile={profile} />\n\n        <CashoutComponent profile={profile} canCashout={this.state.canCashout} />\n\n        {profile.friends &&\n          <EarnyLinkBox referralLinkUrl={profile.friends.referral_link} />\n        }\n\n        {this.state.showActivateEarnyPlus &&\n          <EarnyPlusCard />\n        }\n\n        <FreeSubscriptionCard enabled={this.state.showActivateFreeMonth} />\n\n        <SettingScreenLinks isSubscribed={this.state.isSubscribed}/>\n\n        <div className=\"download-links\">\n          <button id=\"app-store-button\" className=\"store-button\" onClick={this.handleAppStoreClick}></button>\n          <button id=\"android-store-button\" className=\"store-button\" onClick={this.handleAndroidStoreClick}></button>\n        </div>\n\n        <div className=\"settings-app-version\">\n          <p>{version}</p>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    if (this.state.loaded === false) {\n      return (\n        <div id=\"earny-loader\">\n          <SyncLoader\n            size={17}\n            color={\"#71dcc1\"}\n            loading={!this.state.loaded}\n          />\n        </div>\n      )\n    }\n    return this.renderSettingsScreen();\n  }\n}\n","import React from \"react\";\n\nimport { NavLink } from 'react-router-dom';\n\nimport './BottomNavigation.scss';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\nexport interface BottomNavigationRoute {\n    key: number;\n    path: string;\n    iconPathUrl: string;\n}\n\ninterface BottomNavigationProps {\n    routes: BottomNavigationRoute[];\n}\n\ninterface BottomNavigationState {\n\n}\n\n// ===========================================================================================\n// --- BottomNavigation\n// ===========================================================================================\nexport class BottomNavigation extends React.Component<BottomNavigationProps, BottomNavigationState> {\n\n    render() {\n        const menuItems: any = [];\n\n        this.props.routes.map((route: any) => {\n            return menuItems.push(\n                <div key={route.key} className=\"bottom-nav-menu-item\">\n                    <NavLink to={route.path} activeClassName='navlink-active'>\n                        <img src={route.iconPathUrl} alt=\"\"/>\n                    </NavLink>\n                </div>\n            )\n        })\n\n        return (\n            <div className=\"bottom-navigation\">\n                {menuItems}\n            </div>\n        )\n    }\n}\n","import React from \"react\";\nimport { PopupMixpanelService } from '../../../../services/popup-mixpanel.service';\nimport { BrowserService } from \"../../../../../common/services/browser.service\";\n\nimport './WatchListConfirmationModal.scss';\nimport EY from \"../../../../../common/EY\";\n\nconst browserService = new BrowserService();\n\nexport default class WatchListConfirmationModal extends React.Component<any, any> {\n\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            show: false\n        }\n    }\n\n    handleAppStoreClick = () => {\n        PopupMixpanelService.trackiOSAppStoreButtonPressed();\n        browserService.navigateToExternalUrl(EY.Urls.EARNY_APP_IOS_STORE_URL, true);\n    }\n\n    handleAndroidStoreClick = () => {\n        PopupMixpanelService.trackAndroidAppStoreButtonPressed();\n        browserService.navigateToExternalUrl(EY.Urls.EARNY_APP_ANDROID_STORE_URL, true);\n    }\n\n    show = () => {\n        this.setState({ show: true });\n    }\n\n    close = () => {\n        this.setState({ show: false });\n    }\n\n    render() {\n        return (\n            <>\n                <div id=\"confirmation-modal\" className={this.state.show ? 'show fadeIn' : 'hidden fadeOut'}>\n                    <div className=\"modal-content\">\n                        <button id=\"close\" onClick={this.close}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 15 15\">\n                                <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"#232E3B\" stroke-linecap=\"round\" stroke-width=\"2.36\">\n                                    <path d=\"M2.289 1.3L13 13M12.711 1.3L2 13\" />\n                                </g>\n                            </svg>\n                        </button>\n                        <div className=\"modal-price-drop\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"69\" height=\"70\" viewBox=\"0 0 69 70\">\n                                <g fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(-.5)\">\n                                    <circle cx=\"35\" cy=\"35\" r=\"34.5\" fill=\"#BFE8E0\" />\n                                    <circle cx=\"35\" cy=\"35\" r=\"26.172\" fill=\"#63CBB7\" />\n                                    <path fill=\"#FFF\" stroke=\"#FFF\" d=\"M48.45 27.541a1.848 1.848 0 0 1 0 2.614L34.076 44.529a1.842 1.842 0 0 1-1.311.541 1.837 1.837 0 0 1-1.332-.54l-7.841-7.84a1.848 1.848 0 1 1 2.614-2.614l6.547 6.548 13.083-13.083a1.848 1.848 0 0 1 2.614 0z\" />\n                                </g>\n                            </svg>\n                            <div className=\"price-drop-notice\">\n                                <p>Well let you know if theres a price drop. View your watchlist by downloading our app.</p>\n                            </div>\n                        </div>\n                        <div className=\"download-links\">\n                            <button id=\"app-store-button\" className=\"store-button\" onClick={this.handleAppStoreClick}></button>\n                            <button id=\"android-store-button\" className=\"store-button\" onClick={this.handleAndroidStoreClick}></button>\n                        </div>\n                    </div>\n                </div>\n            </>\n        );\n    }\n}","import React from 'react';\n\nimport { AreaChart, Area, XAxis, YAxis, Tooltip } from 'recharts';\nimport { format } from 'date-fns';\nimport { ChartData } from '../../../../../common/interfaces';\n\nimport './PriceHistoryChart.scss';\n\ninterface PriceHistoryChartProps {\n    chartData?: ChartData[];\n}\n\nexport class PriceHistoryChart extends React.Component<PriceHistoryChartProps, any> {\n\n    private emptyData: ChartData[] = [{ price: 0, date: new Date() }, { price: 0, date: new Date() }];\n\n    formatDate = (date: string) => {\n        // return format(new Date(date), 'MMM d');\n        return format(new Date(date), 'MM/dd');\n\n    }\n\n    formatPrice = (price: string) => {\n        return `$${price}`;\n    }\n\n    formatTooltip = (value: any, name: string, props: any) => {\n        return [`$${value}`];\n    }\n\n    formatTooltipLabel = (label: any) => {\n        return format(new Date(label), 'MMM d yyyy');\n    }\n\n    render() {\n\n        /**\n         * All this because recharts does not allow empty charts ...\n         */\n        const isEmpty: boolean = !this.props.chartData || (this.props.chartData.length === 0);\n        const data = isEmpty ? this.emptyData : this.props.chartData;\n        const showDots: boolean = !isEmpty;\n        const stroke: string = isEmpty ? 'none' : '#0070f4';\n\n        return (\n            <div id=\"price-history-chart\">\n                <AreaChart\n                    width={330}\n                    height={180}\n                    data={data}\n                    margin={{ top: 20, right: 20, left: 0, bottom: 10 }}\n                >\n\n                    <defs>\n                        <linearGradient id=\"MyGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"0%\" stopColor=\"rgba(0, 112, 244, 0.5)\" />\n                            <stop offset=\"100%\" stopColor=\"rgba(0, 112, 244, 0)\" />\n                        </linearGradient>\n                    </defs>\n\n\n                    {isEmpty === false &&\n                        <XAxis\n                            axisLine={false}\n                            tick={{ fontSize: 13 }}\n                            tickLine={false}\n                            dataKey=\"date\"\n                            interval={'preserveStartEnd'}\n                            tickMargin={10}\n                            tickFormatter={this.formatDate}\n                        />\n                    }\n\n                    <YAxis\n                        axisLine={false}\n                        tick={{ fontSize: 13, fontFamily: 'Montserrat' }}\n                        tickLine={false}\n                        interval=\"preserveStartEnd\"\n                        tickMargin={10}\n                        tickFormatter={this.formatPrice}\n                    />\n\n                    {isEmpty === false &&\n                        <Tooltip\n                            labelFormatter={this.formatTooltipLabel}\n                            formatter={this.formatTooltip}\n                        />\n                    }\n\n                    <Area\n                        type=\"linear\"\n                        dataKey=\"price\"\n                        stroke={stroke}\n                        strokeWidth=\"3\"\n                        fillOpacity=\"1\"\n                        fill=\"url(#MyGradient)\"\n                        dot={showDots}\n                    />\n\n                </AreaChart>\n\n                {isEmpty &&\n                    <div className=\"banner-non-available\">\n                        Price history unavailable\n                    </div>\n                }\n            </div>\n        )\n    }\n}","import React from \"react\";\nimport styled from 'styled-components';\n\nimport './GradientStaticSlider.scss';\n\ninterface GradientStaticSliderProps {\n    percentage: number;\n}\nconst colorFrom = {\n    red: 255,\n    green: 220,\n    blue: 0\n}\nconst colorTo = {\n    red: 58,\n    green: 224,\n    blue: 192\n}\n\nexport class GradientStaticSlider extends React.Component<GradientStaticSliderProps, any> {\n\n    render() {\n\n        const percentZeroToOne = this.props.percentage;\n        const thumbRed = colorFrom.red + percentZeroToOne * (colorTo.red - colorFrom.red);\n        const thumbGreen = colorFrom.green + percentZeroToOne * (colorTo.green - colorFrom.green);\n        const thumbBlue = colorFrom.blue + percentZeroToOne * (colorTo.blue - colorFrom.blue);\n\n        const Input = styled.input`\n            &::-webkit-slider-thumb {\n                background-color: rgba(${thumbRed}, ${thumbGreen}, ${thumbBlue}, 1);\n                filter: brightness(90%);\n\n            }\n        `;\n        return (\n            <div id=\"gradientStaticSlider\">\n                <Input type=\"range\" min=\"0\" max=\"1\" step=\"0.1\" value={this.props.percentage} className=\"range blue\"></Input>\n            </div>\n        )\n    }\n}","import { Product } from \"../interfaces\";\n\nexport enum ProductState {\n    NO_PRODUCT_PAGE,\n    NO_PRODUCT_DETAILS,\n    PRODUCT_DETAILS_PENDING,\n    PRODUCT_DETAILS_VALID\n}\n\nexport class ProductStateParser {\n\n    public static getState(product?: Product | null): ProductState {\n\n        if (!product) return ProductState.NO_PRODUCT_PAGE;\n\n        if (product.isPendingProductDetails === true) {\n            return ProductState.PRODUCT_DETAILS_PENDING;\n        }\n\n        if (product.isProductPage) {\n            if (product.productDetails) {\n                if (!product.productDetails.name) {\n                    return ProductState.PRODUCT_DETAILS_PENDING;\n                }\n                return ProductState.PRODUCT_DETAILS_VALID;\n            }\n            return ProductState.NO_PRODUCT_DETAILS;\n        }\n        return ProductState.NO_PRODUCT_PAGE;\n    }\n}","import React, { RefObject } from \"react\";\nimport Lottie from \"react-lottie\";\nimport SyncLoader from \"react-spinners/SyncLoader\";\nimport WatchListConfirmationModal from \"./modal/WatchListConfirmationModal\";\nimport { PriceHistoryChart } from \"./price-history-chart/PriceHistoryChart\";\nimport { PopupMixpanelService } from \"../../../services/popup-mixpanel.service\";\nimport { ProductDetails, Product, PriceDetails } from \"../../../../common/interfaces\";\nimport { MessageSender } from \"../../../../common/messaging/message-sender\";\nimport { GradientStaticSlider } from \"../../../../common/react/GradientStaticSlider/GradientStaticSlider\";\nimport { ProductState, ProductStateParser } from \"../../../../common/product-state-parser/product-state-parser\";\nimport { RouteComponentProps } from 'react-router-dom';\nimport { PopupScreen } from \"../../PopupScreen\";\nimport pdpAnimation from '../../../public/lotties/loading-pdp-animation.json';\n\nimport './ProductDetailsScreen.scss';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\ninterface ProductDetailsScreenProps extends RouteComponentProps<any> {\n\n}\n\ninterface ProductDetailsScreenState {\n    loaded: boolean;\n    product: Product | null;\n    isProductSavedToWatchlist: boolean;\n    showProductDetailsPending: boolean;\n    isProductFromWatchlist: boolean;\n}\n\n// ===========================================================================================\n// --- PriceTrackingScreen\n// ===========================================================================================\nexport class ProductDetailsScreen extends PopupScreen<ProductDetailsScreenProps, ProductDetailsScreenState>{\n\n    private modal: RefObject<WatchListConfirmationModal> = React.createRef();\n\n    constructor(props: ProductDetailsScreenProps) {\n        super(props, 'product-details');\n\n        this.state = {\n            loaded: false,\n            product: null,\n            isProductSavedToWatchlist: false,\n            showProductDetailsPending: false,\n            isProductFromWatchlist: false\n        };\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n\n        let product: Product | null = null;\n        let isProductSavedToWatchlist: boolean = false;\n        let isProductFromWatchlist: boolean = false;\n\n        if (this.props.match.params.itemId) {\n            product = await MessageSender.getWatchlistItem(this.props.match.params.itemId);\n            isProductFromWatchlist = true;\n\n        } else {\n            product = await MessageSender.getActiveProduct();\n        }\n\n        try {\n\n            if (product && product.productDetails) {\n                if (product.productDetails.isInWatchlist) {\n                    isProductSavedToWatchlist = product.productDetails.isInWatchlist;\n                }\n            }\n\n            this.setState({\n                product,\n                isProductSavedToWatchlist,\n                isProductFromWatchlist,\n                loaded: true\n            });\n\n        } catch (error) {\n            console.log('Error', error);\n        }\n    }\n\n    onClickPrevious = () => {\n        this.props.history.goBack();\n    }\n\n    onSave = async () => {\n        const isFromProductDetails: boolean = true;\n        const isProductSavedToWatchlist = !this.state.isProductSavedToWatchlist;\n        this.setState({ isProductSavedToWatchlist });\n\n        if (isProductSavedToWatchlist) {\n            PopupMixpanelService.trackProductDetailsAddToWatchlistCTAPressed();\n            await MessageSender.addItemToWatchlist(isFromProductDetails);\n            if (this.modal.current) {\n                this.modal.current.show();\n            }\n        } else {\n            PopupMixpanelService.trackProductDetailsAddToWatchlistCTAPressed();\n            await MessageSender.removeItemFromWatchlist(isFromProductDetails);\n            if (this.modal.current) {\n                this.modal.current.close();\n            }\n        }\n    }\n\n    addProductToWatchlistForPending = async () => {\n        PopupMixpanelService.trackProductDetailsAddToWatchlistCTAPressed();\n        if (await MessageSender.addItemToWatchlistPendingProductDetails() === true) {\n            this.setState({ showProductDetailsPending: true });\n        }\n    }\n\n    renderNoProductDetails = () => {\n        return (\n            <div id=\"product-details-canvas\">\n                <div className=\"no-product-details\">\n                    <p className=\"add-to-watchlist-title\">Add this product to your watchlist to view details</p>\n\n                    <p className=\"watchlist-information-title\">Information will be updated within the hour</p>\n\n                    <button id=\"add-to-watchlist\" onClick={this.addProductToWatchlistForPending}>\n                        Add to Watchlist\n                    </button>\n                </div>\n            </div>\n        )\n    }\n\n    renderProductDetailsPending = () => {\n        const animation = {\n            loop: true,\n            autoplay: true,\n            animationData: pdpAnimation,\n            rendererSettings: {\n                className: 'lottie',\n                preserveAspectRatio: \"xMidYMid slice\"\n            }\n        };\n\n        return (\n            <div id=\"product-details-canvas\">\n                <div className=\"product-details-pending\">\n\n                    <Lottie options={animation} height={150} width={150} />\n\n                    <p className=\"loading-product-details-title\">Loading product details...</p>\n\n                    <p className=\"information-title\">Information will be updated within the hour</p>\n                </div>\n            </div>\n        )\n    }\n\n    renderIsNotProductPage = () => {\n        return (\n            <div id=\"product-details-canvas\">\n                <div className=\"price-tracking-earny-logo\">\n                    <img src=\"images/earny-logo.svg\" alt=\"earny-logo\" />\n                </div>\n                <div className=\"pdp-no-product\">\n                    <img src=\"images/product-details/no-pdp.svg\" alt=\"no-product-details-icon\" width=\"100\" />\n                </div>\n                <div className=\"pdp-no-product-description\">\n                    <p>Visit a product page for more details and to add to your watchlist</p>\n                </div>\n            </div>\n        )\n    }\n\n    renderPriceProtected(productDetails: ProductDetails, priceDetails?: PriceDetails) {\n        let productName: string = productDetails.name || '';\n        productName = (productName.length >= 70) ? (productName.substring(0, 70) + '...') : productName;\n        const lowestPriceTitle: string = (priceDetails && priceDetails.lowestPrice) ? priceDetails.lowestPrice.title : 'LOWEST';\n        const highestPriceTitle: string = (priceDetails && priceDetails.highestPrice) ? priceDetails.highestPrice.title : 'HIGHEST';\n        let lowestPriceValue: string = (priceDetails && priceDetails.lowestPrice) ? priceDetails.lowestPrice.value.toString() : 'N/A';\n        let highestPriceValue: string = (priceDetails && priceDetails.highestPrice) ? priceDetails.highestPrice.value.toString() : 'N/A';\n\n        if (lowestPriceValue[0] !== '$') lowestPriceValue = '$' + lowestPriceValue;\n        if (highestPriceValue[0] !== '$') highestPriceValue = '$' + highestPriceValue;\n\n        return (\n            <div id=\"product-details-canvas\">\n\n                {this.state.isProductFromWatchlist &&\n                    <div id=\"previous-button\" onClick={this.onClickPrevious}>\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 240.823 240.823\">\n                            <path d=\"M57.633 129.007L165.93 237.268c4.752 4.74 12.451 4.74 17.215 0 4.752-4.74 4.752-12.439 0-17.179l-99.707-99.671 99.695-99.671c4.752-4.74 4.752-12.439 0-17.191-4.752-4.74-12.463-4.74-17.215 0L57.621 111.816c-4.679 4.691-4.679 12.511.012 17.191z\" />\n                        </svg>\n                    </div>\n                }\n\n                <div className=\"product-details\">\n                    <img src={productDetails.imageUrl} alt=\"\" />\n                    <div className=\"product-content\">\n                        <div className=\"product-name\">\n                            <p>{productName}</p>\n                        </div>\n                        <div className=\"product-prices\">\n                            {productDetails.price &&\n                                <div className=\"product-new-price\">\n                                    {productDetails.price}\n                                </div>\n                            }\n                            <button id=\"save-button\" className={this.state.isProductSavedToWatchlist ? 'saved' : 'unsaved'} onClick={this.onSave}>\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"23\" height=\"20\" viewBox=\"0 0 26 22\">\n                                    <path id=\"save-path\" fill=\"none\" fill-rule=\"evenodd\" stroke=\"#232E3B\" stroke-width=\"2\" d=\"M20.407 1.487c-4.558-2.013-7.783 2.888-7.783 2.888S9.399-.525 4.84 1.484c-3.565 1.575-4.879 5.97-2.957 9.36 1.48 2.615 4.512 5.908 10.21 9.986a.915.915 0 0 0 1.062 0c5.695-4.074 8.727-7.371 10.208-9.982 1.92-3.391.604-7.786-2.957-9.361z\" />\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                {priceDetails && priceDetails.timeToBuy &&\n                    <div className=\"product-time-to-buy\">\n                        <span className=\"left\">Wait</span>\n                        <GradientStaticSlider percentage={priceDetails.timeToBuy.value} />\n                        <span className=\"right\">Buy</span>\n                    </div>\n                }\n\n                <div id=\"price-stats\">\n                    <div className=\"price-stat left\">\n                        <p>{highestPriceTitle}</p>\n                        <p className=\"price\">{highestPriceValue}</p>\n                    </div>\n\n                    <div className=\"price-stat right\">\n                        <p>{lowestPriceTitle}</p>\n                        <p className=\"price\">{lowestPriceValue}</p>\n                    </div>\n                </div>\n\n                <PriceHistoryChart chartData={priceDetails ? priceDetails.chartData : undefined} />\n\n                <WatchListConfirmationModal ref={this.modal} />\n            </div>\n        );\n    }\n\n    render() {\n\n        if (this.state.loaded === false) {\n            return (\n                <div id=\"earny-loader\">\n                    <SyncLoader\n                        size={17}\n                        color={\"#71dcc1\"}\n                        loading={!this.state.loaded}\n                    />\n                </div>\n            )\n        }\n\n        if (this.state.showProductDetailsPending) {\n            return this.renderProductDetailsPending();\n        }\n\n        const product: Product | null = this.state.product;\n        const productState: ProductState = ProductStateParser.getState(product);\n\n        switch (productState) {\n            case ProductState.NO_PRODUCT_DETAILS:\n                return this.renderNoProductDetails();\n\n            case ProductState.NO_PRODUCT_PAGE:\n                return this.renderIsNotProductPage();\n\n            case ProductState.PRODUCT_DETAILS_PENDING:\n                return this.renderProductDetailsPending();\n\n            case ProductState.PRODUCT_DETAILS_VALID:\n                return this.renderPriceProtected(product!.productDetails!, product!.priceDetails);\n\n            default:\n                return this.renderIsNotProductPage();\n        }\n    }\n}","import React from \"react\";\nimport { WatchlistItem } from \"../../../../../common/interfaces\";\nimport styled from 'styled-components';\n\nimport './WatchlistItemComponent.scss';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\ninterface WatchlistItemComponentProps {\n    isDeleteMode: boolean;\n    watchlistItem: WatchlistItem;\n    onItemClicked: (item: WatchlistItem) => void;\n    onSelected: (item: WatchlistItem) => void;\n    onUnselected: (item: WatchlistItem) => void;\n}\n\ninterface WatchlistItemComponentState {\n    selected: boolean;\n}\n\nconst classNames = require('classnames');\n\n// ===========================================================================================\n// --- WatchlistItemComponent\n// ===========================================================================================\nexport class WatchlistItemComponent extends React.Component<WatchlistItemComponentProps, WatchlistItemComponentState> {\n\n    constructor(props: WatchlistItemComponentProps) {\n        super(props);\n\n        this.state = {\n            selected: false\n        };\n    }\n\n    componentWillReceiveProps(props: WatchlistItemComponentProps) {\n        if (props.isDeleteMode === false && this.state.selected === true) {\n            this.setState({ selected: false });\n        }\n    }\n\n    onClickSelect = () => {\n        if (this.props.isDeleteMode === false) {\n            return this.props.onItemClicked(this.props.watchlistItem);\n        }\n\n        const willBeSelected = !this.state.selected;\n        this.setState({ selected: willBeSelected });\n\n        if (willBeSelected) {\n            this.props.onSelected(this.props.watchlistItem);\n        } else {\n            this.props.onUnselected(this.props.watchlistItem);\n        }\n    }\n\n    render() {\n\n        const productName: string = (this.props.watchlistItem.name.length >= 45) ? (this.props.watchlistItem.name.substring(0, 45) + '...') : this.props.watchlistItem.name;\n\n        const PriceDropValue = styled.span`color: #${this.props.watchlistItem.priceChange.color};`;\n\n        const selectedClass = this.state.selected ? 'selected' : '';\n\n        const deleteButtonClassNames = classNames({\n            'delete-button': true,\n            'shown': this.props.isDeleteMode\n        });\n\n        return (\n            <div className={`watchlist-item ${selectedClass}`} onClick={this.onClickSelect}>\n\n                <div className={deleteButtonClassNames}>\n                    {this.state.selected &&\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"shown\" viewBox=\"0 0 24 23\">\n                            <g fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(.466)\">\n                                <circle cx=\"11.5\" cy=\"11.5\" r=\"11.264\" fill=\"#0070F4\" />\n                                <path fill=\"#FFF\" d=\"M9.556 15.1l-3.323-3.323a.783.783 0 0 1 1.108-1.107l2.774 2.774 5.544-5.543a.783.783 0 0 1 1.108 1.107L10.676 15.1a.78.78 0 0 1-.5.228h-.121a.78.78 0 0 1-.5-.227z\" />\n                            </g>\n                        </svg>\n                    }\n                    {this.state.selected === false &&\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className={this.props.isDeleteMode ? 'shown' : ''} viewBox=\"0 0 24 23\">\n                            <g fill=\"none\" fill-rule=\"evenodd\" transform=\"translate(.466)\">\n                                <circle cx=\"11.5\" cy=\"11.5\" r=\"11.264\" fill=\"#0070F4\" />\n                                <rect width=\"11.063\" height=\"2\" x=\"5.968\" y=\"10.5\" fill=\"#FFF\" rx=\"1\" />\n                            </g>\n                        </svg>\n                    }\n\n                </div>\n\n                <img src={this.props.watchlistItem.imageUrl} alt=\"\" />\n                <div className=\"watchlist-item-content\">\n                    <p>{productName}</p>\n                    <div className=\"prices\">\n                        {this.props.watchlistItem.newPrice &&\n                            <>\n                                <div className=\"new-price\">{this.props.watchlistItem.newPrice}</div>\n                                <div className=\"previous-price line-through\">{this.props.watchlistItem.previousPrice}</div>\n                            </>\n                        }\n                        {!this.props.watchlistItem.newPrice &&\n                            <>\n                                <div className=\"previous-price main\">{this.props.watchlistItem.previousPrice}</div>\n                            </>\n                        }\n                        <div className=\"pricedrop-value\">\n                            <PriceDropValue>\n                                {this.props.watchlistItem.priceDropValue}\n                            </PriceDropValue>\n                        </div>\n                    </div>\n                </div>\n            </div >\n        );\n    }\n}","import * as _ from 'lodash';\nimport React from \"react\";\nimport Lottie from \"react-lottie\";\nimport SyncLoader from \"react-spinners/SyncLoader\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { WatchlistItem } from \"../../../../common/interfaces\";\nimport { MessageSender } from '../../../../common/messaging/message-sender';\nimport { PopupMixpanelService } from '../../../services/popup-mixpanel.service';\nimport { WatchlistItemComponent } from './WatchlistItemComponent/WatchlistItemComponent';\nimport { PopupScreen } from '../../PopupScreen';\n\nimport watchlistAnimation from \"../../../public/lotties/add-to-watchlist-animation.json\";\n\nimport './WatchlistScreen.scss';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\nconst classNames = require('classnames');\n\ninterface WatchlistScreenProps extends RouteComponentProps<any> {\n\n}\n\ninterface WatchlistScreenState {\n    loaded: boolean;\n    isDeleteMode: boolean;\n    watchlist: WatchlistItem[];\n    selectedItems: WatchlistItem[];\n}\n\nfunction WatchlistStep(props: any) {\n    return (\n        <div className=\"watchlist-step-inline\">\n            <div className=\"watchlist-step-number\"><span>{props.number}</span></div>\n            <div className=\"watchlist-step-description\">\n                <p>{props.text}</p>\n            </div>\n        </div>\n    );\n}\n\n// ===========================================================================================\n// --- WatchlistScreen\n// ===========================================================================================\nexport class WatchlistScreen extends PopupScreen<WatchlistScreenProps, WatchlistScreenState> {\n\n    constructor(props: WatchlistScreenProps) {\n        super(props, 'watchlist');\n\n        this.state = {\n            loaded: false,\n            isDeleteMode: false,\n            watchlist: [],\n            selectedItems: []\n        }\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        const watchlist = await MessageSender.getWatchlist();\n        this.setState({ watchlist, loaded: true });\n        PopupMixpanelService.trackWatchlistPresented();\n    }\n\n    onClickedItem = (clickedItem: WatchlistItem) => {\n        this.props.history.push(`/watchlist/details/${clickedItem.itemId}`, { itemId: clickedItem.itemId });\n    }\n\n    onSelectedItem = async (selectedItem: WatchlistItem) => {\n        const items = this.state.selectedItems;\n        items.push(selectedItem);\n        this.setState({ selectedItems: items });\n        PopupMixpanelService.trackWatchlistItemSelected();\n    }\n\n    onUnselectedItem = (unselectedItem: WatchlistItem) => {\n        let items = this.state.selectedItems;\n        items = _.filter(items, (item: WatchlistItem) => {\n            return item.itemId !== unselectedItem.itemId;\n        });\n        this.setState({ selectedItems: items });\n    }\n\n    startDeletion = async () => {\n        this.setState({ isDeleteMode: true });\n        PopupMixpanelService.trackWatchlistEditItemsButtonPressed();\n    }\n\n    cancelDeletion = () => {\n        this.setState({ isDeleteMode: false, selectedItems: [] });\n    }\n\n    removeItems = async () => {\n\n        const itemIds: string[] = this.state.selectedItems.map((item: WatchlistItem) => item.itemId);\n        await MessageSender.removeItemBatchFromWatchlist(itemIds);\n        const watchlist = _.filter(this.state.watchlist, (item: WatchlistItem) => {\n            return !itemIds.includes(item.itemId);\n        });\n        this.setState({ watchlist, isDeleteMode: false });\n        PopupMixpanelService.trackWatchlistItemsRemoveButtonPressed();\n    }\n\n    renderList = () => {\n        const watchlistItems: any = [];\n\n        this.state.watchlist\n            .filter((item: WatchlistItem) => {\n                return (item.name !== undefined && item.name !== null && item.name !== '');\n            })\n            .map((item: WatchlistItem) => {\n                if (item.name) {\n                    return watchlistItems.push(\n                        <WatchlistItemComponent\n                            isDeleteMode={this.state.isDeleteMode}\n                            watchlistItem={item}\n                            onItemClicked={this.onClickedItem}\n                            onSelected={this.onSelectedItem}\n                            onUnselected={this.onUnselectedItem} />\n                    );\n                }\n            });\n\n        const removeButtonClasses = classNames({\n            'shown': this.state.isDeleteMode,\n            'enabled': (this.state.selectedItems.length > 0)\n        });\n\n\n        return (\n            <div id=\"watchlist-canvas\">\n                <div id=\"list\" className={this.state.isDeleteMode ? 'delete-mode' : ''}>\n                    {watchlistItems}\n                </div>\n\n                <button id=\"edit-button\" className={this.state.isDeleteMode ? 'cancel' : ''} onClick={this.state.isDeleteMode ? this.cancelDeletion : this.startDeletion}>\n                    {this.state.isDeleteMode === false &&\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"17\" height=\"16\" viewBox=\"0 0 17 16\">\n                            <path fill=\"#232E3B\" fill-rule=\"nonzero\" stroke=\"#232E3B\" stroke-width=\".5\" d=\"M15.504 2.352l-.988-.988a2.098 2.098 0 0 0-2.964 0l-8.893 8.892a.465.465 0 0 0-.118.202l-1.318 4.61a.467.467 0 0 0 .576.578l4.611-1.318a.46.46 0 0 0 .202-.118l8.892-8.894c.396-.396.614-.922.614-1.482 0-.56-.218-1.087-.614-1.482zM6.038 13.464L2.35 14.518l1.053-3.69 7.16-7.16 2.635 2.635-7.16 7.161zm8.808-8.806l-.988.988-2.636-2.636.988-.988a1.167 1.167 0 0 1 1.648 0l.988.988c.22.22.34.512.34.824 0 .31-.12.604-.34.824z\" />\n                        </svg>\n                    }\n                    {this.state.isDeleteMode === true &&\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"15\" viewBox=\"0 0 14 15\">\n                            <g fill=\"none\" fill-rule=\"evenodd\" stroke=\"#232E3B\" stroke-linecap=\"round\" stroke-width=\"2.36\">\n                                <path d=\"M1.789 1.3L12.5 13M12.211 1.3L1.5 13\" />\n                            </g>\n                        </svg>\n                    }\n                </button>\n\n                <button\n                    id=\"remove-button\"\n                    disabled={(this.state.selectedItems.length === 0)}\n                    className={removeButtonClasses}\n                    onClick={this.removeItems}>\n                    Remove\n                </button>\n\n            </div >\n        );\n    }\n\n    renderListEmpty = () => {\n        const animation = {\n            loop: true,\n            autoplay: true,\n            animationData: watchlistAnimation,\n            rendererSettings: {\n                preserveAspectRatio: \"xMidYMid slice\"\n            }\n        };\n\n        return (\n            <div id=\"watchlist-canvas\" className=\"empty\">\n                <div className=\"animation\">\n                    <Lottie options={animation} height={201} width={312} />\n                </div>\n                <p>Start adding to your watchlist</p>\n                <div className=\"add-to-watchlist-steps\">\n                    <WatchlistStep number=\"1\" text=\"Visit a retailer product page\" />\n                    <WatchlistStep number=\"2\" text=\"Click on the Earny widget to add to your watchlist, view price history, and more\" />\n                </div>\n            </div >\n        );\n    }\n\n    render() {\n\n        if (this.state.loaded === false) {\n            return (\n                <div id=\"earny-loader\">\n                    <SyncLoader\n                        size={17}\n                        color={\"#71dcc1\"}\n                        loading={!this.state.loaded}\n                    />\n                </div>\n            )\n        }\n\n        if (this.state.watchlist.length === 0) {\n            return this.renderListEmpty();\n        }\n        return this.renderList();\n    }\n}","import React from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\n\nimport './FriendReferralEarnings.scss';\n\ninterface FriendReferralEarningsProps extends RouteComponentProps<any> {\n\n}\n\ninterface FriendReferralEarningsState {\n\n}\n\nexport class FriendReferralEarnings extends React.Component<any, any> {\n\n    onClickPrevious = () => {\n        this.props.history.goBack();\n    }\n\n    render() {\n\n        return (\n            <div id=\"friend-referral-earnings-canvas\">\n                <div id=\"previous-button\" onClick={this.onClickPrevious}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 240.823 240.823\">\n                        <path d=\"M57.633 129.007L165.93 237.268c4.752 4.74 12.451 4.74 17.215 0 4.752-4.74 4.752-12.439 0-17.179l-99.707-99.671 99.695-99.671c4.752-4.74 4.752-12.439 0-17.191-4.752-4.74-12.463-4.74-17.215 0L57.621 111.816c-4.679 4.691-4.679 12.511.012 17.191z\" />\n                    </svg>\n                </div>\n\n                <h3>Friend Referral Earnings</h3>\n\n            </div>\n        )\n    }\n}","import React from \"react\";\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\n\nimport { HomeScreen } from \"../Home/HomeScreen\";\nimport { ShareScreen } from \"../Share/ShareScreen\";\nimport { ProfileScreen } from \"../Profile/ProfileScreen\";\nimport { BottomNavigation, BottomNavigationRoute } from \"./BottomNavigation/BottomNavigation\";\nimport { ProductDetailsScreen } from '../ProductDetails/ProductDetailsScreen';\nimport { WatchlistScreen } from \"../Watchlist/WatchlistScreen\";\nimport { FriendReferralEarnings } from \"../Profile/FriendReferralEarnings/FriendReferralEarnings\";\n\nimport './Main.css';\n\n// ===========================================================================================\n// --- Constants/Interfaces\n// ===========================================================================================\ninterface MainProps {\n\n}\n\ninterface MainState {\n\n}\n\n// ===========================================================================================\n// --- Main\n// ===========================================================================================\nexport class Main extends React.Component<MainProps, MainState> {\n\n  constructor(props: MainProps) {\n    super(props);\n\n    this.state = {\n      isSharingEnabled: false\n    }\n  }\n\n  render() {\n\n    const routes: BottomNavigationRoute[] = [\n      { key: 1, path: '/home', iconPathUrl: 'icons/home-icon.svg' },\n      { key: 2, path: '/product-details', iconPathUrl: 'icons/tag-icon.svg' },\n      { key: 3, path: '/watchlist', iconPathUrl: 'icons/heart-icon.svg' },\n      { key: 4, path: '/share', iconPathUrl: 'icons/share-icon.svg' },\n      { key: 5, path: '/profile', iconPathUrl: 'icons/profile-icon.svg' },\n    ]\n\n    return (\n      <Router>\n        <div className=\"main-container\">\n          <Switch>\n\n            <Route path=\"/home\" component={HomeScreen} />\n\n            <Route path=\"/product-details\" component={ProductDetailsScreen} />\n\n            <Route path=\"/watchlist/details/:itemId\" component={ProductDetailsScreen} />\n            <Route path=\"/watchlist\" component={WatchlistScreen} />\n\n            <Route path=\"/share\" component={ShareScreen} />\n\n            <Route path=\"/profile/friend-referral-earnings\" component={FriendReferralEarnings} />\n            <Route path=\"/profile\" component={ProfileScreen} />\n\n            <Route path=\"/\">\n              <Redirect to='/home' />\n            </Route>\n          </Switch>\n        </div>\n\n        <div>\n          <BottomNavigation routes={routes} />\n        </div>\n      </Router>\n    );\n  }\n}\n","import React from 'react';\n\nimport { LoginScreen } from './components/screens/Login/LoginScreen';\nimport { Main } from './components/screens/Main/Main';\nimport { PopupMixpanelService } from './services/popup-mixpanel.service';\nimport { BrowserService } from '../common/services/browser.service';\nimport { MessageSender } from '../common/messaging/message-sender';\n\nimport './EarnyPopup.scss';\n\nconst browserService = new BrowserService();\n\ninterface EarnyPopupState {\n  loaded: boolean;\n  isLoggedIn?: boolean;\n}\n\nexport class EarnyPopup extends React.Component<{}, EarnyPopupState> {\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      loaded: false\n    }\n  }\n\n  async componentDidMount() {\n\n    await MessageSender.requestBackgroundSync();\n\n    PopupMixpanelService.trackChromeExtensionPopupOpened();\n\n    const isLoggedIn: boolean = await MessageSender.isUserLoggedIn();\n    this.setState({ isLoggedIn, loaded: true });\n\n    try {\n      await browserService.requestMinimizeEarnyWidget();\n    } catch (error) {\n      // console.error(error.message);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"Earny\">\n\n        {this.state.loaded === false &&\n          <div id=\"boot-container\"></div>\n        }\n\n        {this.state.isLoggedIn === true &&\n          <Main />\n        }\n\n        {this.state.isLoggedIn === false &&\n          <LoginScreen />\n        }\n\n      </div>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { EarnyPopup } from './EarnyPopup';\n\nimport './index.css';\n\nReactDOM.render(<EarnyPopup />, document.getElementById('root'));"],"sourceRoot":""}